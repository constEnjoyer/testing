# üîÑ –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã X10

## ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ —à–∞–≥–∏

### 1. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤
- –£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã:
  - ‚ùå `/api/match/x10/active/route.ts`
  - ‚ùå `/api/match/x10/join/route.ts`
  - ‚ùå `/api/match/x10/status/route.ts`

- –°–æ–∑–¥–∞–Ω—ã –æ—Å–Ω–æ–≤–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –ø–æ –æ–±—Ä–∞–∑—Ü—É X2:
  - ‚úÖ `/api/match/x10/game/route.ts` - –æ—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è/–ø–æ–∏—Å–∫–∞ –∏–≥—Ä—ã
  - üîÑ `/api/match/x10/cancel/route.ts` - —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
  - üîÑ `/api/match/x10/complete/route.ts` - —Ç—Ä–µ–±—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

### 2. –ù–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ API –¥–ª—è X10
–û—Å–Ω–æ–≤–Ω–æ–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `game/route.ts` —Ç–µ–ø–µ—Ä—å –≤–∫–ª—é—á–∞–µ—Ç:
- –ü—Ä–æ–≤–µ—Ä–∫—É –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Ç—á–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—á–µ—Ä–µ–¥—å—é –æ–∂–∏–¥–∞–Ω–∏—è
- –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞ –ø—Ä–∏ –Ω–∞–±–æ—Ä–µ 10 –∏–≥—Ä–æ–∫–æ–≤
- –°–ø–∏—Å–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤
- –û—á–∏—Å—Ç–∫—É –æ—á–µ—Ä–µ–¥–∏

## üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–µ—Ä–Ω–æ–π —á–∞—Å—Ç–∏
1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–¥–µ–ª–µ–π**
```typescript
// –û–±–Ω–æ–≤–∏—Ç—å MatchX10 –¥–ª—è –ø–æ–¥–¥–µ—Ä–∂–∫–∏ 10 –∏–≥—Ä–æ–∫–æ–≤ –∏ 3 –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π
interface X10Match {
  matchId: string;
  players: Array<{
    telegramId: number;
    name: string;
    joinedAt: Date;
  }>;
  status: 'waiting' | 'matched' | 'playing' | 'completed';
  winners?: Array<{
    telegramId: number;
    name: string;
    prize: number;  // 450/270/180
  }>;
  ticketsAmount: number;
  currentPlayers: number;
}
```

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤**
```typescript
// src/app/api/socket/x10/handlers.ts
interface X10SocketEvents {
  // –ö–ª–∏–µ–Ω—Ç -> –°–µ—Ä–≤–µ—Ä
  'join_x10_room': {
    telegramId: number;
    username: string;
  };
  'leave_x10_room': {
    telegramId: number;
    matchId: string;
  };
  'complete_x10_game': {
    matchId: string;
    winners: Array<{
      telegramId: number;
      name: string;
      prize: number;
    }>;
  };

  // –°–µ—Ä–≤–µ—Ä -> –ö–ª–∏–µ–Ω—Ç
  'x10_players_found': {
    match: X10Match;
  };
  'x10_game_starting': {
    matchId: string;
    countdown: number;
  };
  'x10_player_left': {
    matchId: string;
    telegramId: number;
  };
}
```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ cancel/route.ts**
- –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –≤—ã—Ö–æ–¥–∞ –∏–∑ –º–∞—Ç—á–∞
- –û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ç—É—Å—ã –æ—Å—Ç–∞–≤—à–∏—Ö—Å—è –∏–≥—Ä–æ–∫–æ–≤
- –û—á–∏—Å—Ç–∏—Ç—å –æ—á–µ—Ä–µ–¥—å –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

4. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ complete/route.ts**
- –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É 3 –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π
- –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤ (450/270/180)
- –û–±–Ω–æ–≤–∏—Ç—å –∏—Å—Ç–æ—Ä–∏—é –∏–≥—Ä

### 2. –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

1. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ö—É–∫–æ–≤**
```typescript
// src/hooks/useGameStateX10.ts
interface X10GameState {
  status: 'idle' | 'waiting' | 'playing' | 'completed';
  match?: X10Match;
  waitingStartTime?: number;
  countdown: number;
  playersCount: number;
  winners?: Array<{
    telegramId: number;
    name: string;
    prize: number;
  }>;
}
```

2. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤**
- –ê–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å `GameRoomX10Container` –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º API
- –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ –∏–≥—Ä–æ–∫–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π
- –û–±–Ω–æ–≤–∏—Ç—å –∞–Ω–∏–º–∞—Ü–∏–∏ –∏ —ç—Ñ—Ñ–µ–∫—Ç—ã

### 3. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏

1. **–û—á–µ—Ä–µ–¥—å –∏–≥—Ä–æ–∫–æ–≤**
- ‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤ (2 –º–∏–Ω—É—Ç—ã –¥–ª—è –º–∞—Ç—á–µ–π, 10 –º–∏–Ω—É—Ç –¥–ª—è –æ—á–µ—Ä–µ–¥–∏)
- ‚úì –ê—Ç–æ–º–∞—Ä–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞
- ‚úì –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Å–ø–∏—Å–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤

2. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç—á–µ–º**
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏–π –∏–≥—Ä–æ–∫–æ–≤
- –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket
- –û–±—Ä–∞–±–æ—Ç–∫–∞ edge cases (9/10 –∏–≥—Ä–æ–∫–æ–≤)

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π (–¥–æ–ª–∂–Ω–æ –±—ã—Ç—å —Ä–æ–≤–Ω–æ 3)
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤
- –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤ –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤

## üìã –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

1. **–ë–∞–∑–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏**
- –°–æ–∑–¥–∞–Ω–∏–µ –æ—á–µ—Ä–µ–¥–∏
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–æ–≤
- –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞
- –í—ã—Ö–æ–¥ –∏–∑ –º–∞—Ç—á–∞
- –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã

2. **Edge cases**
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –∏–≥—Ä–æ–∫–∞ –≤–æ –≤—Ä–µ–º—è –æ–∂–∏–¥–∞–Ω–∏—è
- –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã
- –ù–µ–ø–æ–ª–Ω—ã–π –º–∞—Ç—á (–º–µ–Ω–µ–µ 10 –∏–≥—Ä–æ–∫–æ–≤)
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

3. **–ù–∞–≥—Ä—É–∑–æ—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ**
- –ú–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
- –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã–µ –º–∞—Ç—á–∏
- –í—ã—Å–æ–∫–∞—è —á–∞—Å—Ç–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π

## üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

1. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å**
- –ù–∞–¥–µ–∂–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–µ–π
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ—Å—Ç–æ—è–Ω–∏–π
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ "–∑–∞–≤–∏—Å—à–∏—Ö" –∏–≥—Ä–æ–∫–æ–≤

2. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**
- –ë—ã—Å—Ç—Ä–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–µ–π
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–∞—è –æ—á–∏—Å—Ç–∫–∞ –¥–∞–Ω–Ω—ã—Ö
- –û–ø—Ç–∏–º–∞–ª—å–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ WebSocket

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω—ã—Ö –º–∞—Ç—á–µ–π
- –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç—å—é
- –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏—è

## üìã –¢–µ–∫—É—â–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

### 1. –¢–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- `src/@types/x10.ts` - –û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∏–ø—ã —Ä–µ–∂–∏–º–∞ X10
- `src/@types/x10Socket.ts` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ —Ç–∏–ø—ã –¥–ª—è —Å–æ–∫–µ—Ç–æ–≤ X10
- `src/@types/x10Socket.d.ts` - –¢–∏–ø—ã –¥–ª—è WebSocket —Å–æ–±—ã—Ç–∏–π

### 2. API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
- `src/app/api/match/x10/create/route.ts` - –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞
- `src/app/api/match/x10/cancel/route.ts` - –û—Ç–º–µ–Ω–∞ —É—á–∞—Å—Ç–∏—è
- `src/app/api/match/x10/complete/route.ts` - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∞—Ç—á–∞
- `src/app/api/match/x10Models.ts` - –¢–∏–ø—ã API-–∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤

### 3. –°–µ—Ä–≤–µ—Ä–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏
- `src/app/api/socket/x10/handlers.ts` - WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

### 4. –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
- `src/models/MatchX10.js` - –ú–æ–¥–µ–ª—å –º–∞—Ç—á–∞ X10
- `src/models/WaitingPlayerX10.js` - –ú–æ–¥–µ–ª—å –æ–∂–∏–¥–∞—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞

### 5. –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–µ —Ö—É–∫–∏ –∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã
- `src/hooks/useSocketX10.ts` - –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å WebSocket
- `src/hooks/useGameStateX10.ts` - –•—É–∫ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º –∏–≥—Ä—ã
- `src/contexts/X10RoomContext.tsx` - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–Ω–∞—Ç—ã X10

### 6. API –∫–ª–∏–µ–Ω—Ç –∏ —É—Ç–∏–ª–∏—Ç—ã
- `src/utils/api/x10Api.ts` - API —Ñ—É–Ω–∫—Ü–∏–∏ –¥–ª—è –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏—è —Å —Å–µ—Ä–≤–µ—Ä–æ–º
- `src/utils/x10Utils.ts` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è –∏–≥—Ä–æ–≤–æ–π –∫–æ–º–Ω–∞—Ç—ã

### 7. UI –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/components/GameRoomX10/GameRoomX10Container.tsx` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä
- `src/components/GameRoomX10/components/` - –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
- `src/components/GameRoomX10/styles/` - –°—Ç–∏–ª–∏

### 8. –°—Ç—Ä–∞–Ω–∏—Ü—ã
- `src/app/game-x10/page.tsx` - –°—Ç—Ä–∞–Ω–∏—Ü–∞ –∫–æ–º–Ω–∞—Ç—ã X10

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã X10 –∏ X2

### –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

#### X2 (–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ)
```
src/
  ‚îú‚îÄ‚îÄ components/
  ‚îÇ   ‚îî‚îÄ‚îÄ GameRoom/
  ‚îÇ       ‚îú‚îÄ‚îÄ GameRoomContainer.tsx (–º–æ–Ω–æ–ª–∏—Ç–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç)
  ‚îÇ       ‚îú‚îÄ‚îÄ components/
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ GameHeader.tsx
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ YinYangWheel.tsx
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ GameControls.tsx
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ WaitingOverlay.tsx
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ CountdownOverlay.tsx
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ResultModal.tsx
  ‚îÇ       ‚îî‚îÄ‚îÄ styles/
  ‚îÇ           ‚îî‚îÄ‚îÄ GameRoomContainer.module.css
  ‚îú‚îÄ‚îÄ hooks/
  ‚îÇ   ‚îú‚îÄ‚îÄ useGameState.ts (—É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º X2)
  ‚îÇ   ‚îî‚îÄ‚îÄ useSocket.ts (–æ–±—â–∏–π —Å–æ–∫–µ—Ç-—Ö—É–∫)
  ‚îî‚îÄ‚îÄ contexts/
      ‚îî‚îÄ‚îÄ UserContext.tsx (–æ–±—â–∏–π –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è)
```

#### X10 (–¢—Ä–µ–±—É–µ—Ç –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏)
```
src/
  ‚îú‚îÄ‚îÄ components/
  ‚îÇ   ‚îî‚îÄ‚îÄ GameRoomX10/
  ‚îÇ       ‚îú‚îÄ‚îÄ GameRoomX10Container.tsx (—Å–ª–∏—à–∫–æ–º –±–æ–ª—å—à–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç —Å ~600 —Å—Ç—Ä–æ–∫–∞–º–∏)
  ‚îÇ       ‚îú‚îÄ‚îÄ components/
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ GameHeaderX10.tsx
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ GameControlsX10.tsx
  ‚îÇ       ‚îÇ   ‚îú‚îÄ‚îÄ WaitingOverlayX10.tsx
  ‚îÇ       ‚îÇ   ‚îî‚îÄ‚îÄ ...
  ‚îÇ       ‚îî‚îÄ‚îÄ styles/
  ‚îÇ           ‚îî‚îÄ‚îÄ GameRoomX10Container.module.css
  ‚îú‚îÄ‚îÄ hooks/
  ‚îÇ   ‚îú‚îÄ‚îÄ useGameStateX10.ts (–Ω–µ–¥–æ–∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è)
  ‚îÇ   ‚îî‚îÄ‚îÄ useSocketX10.ts (—Å–ø–µ—Ü–∏—Ñ–∏—á–Ω—ã–π –¥–ª—è X10)
  ‚îî‚îÄ‚îÄ contexts/
      ‚îî‚îÄ‚îÄ X10RoomContext.tsx (–¥—É–±–ª–∏—Ä—É–µ—Ç —á–∞—Å—Ç—å –ª–æ–≥–∏–∫–∏ UserContext)
```

### –ö–ª—é—á–µ–≤—ã–µ —Ä–∞–∑–ª–∏—á–∏—è

1. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º:**
   - **X2**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `useGameState` —Å —á–µ—Ç–∫–∏–º —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏ –¥–µ–π—Å—Ç–≤–∏–π
   - **X10**: –°–º–µ—à–∏–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –º–µ–∂–¥—É `X10RoomContext`, –ª–æ–∫–∞–ª—å–Ω—ã–º state –∏ –∞—Ç—Ä–∏–±—É—Ç–∞–º–∏

2. **WebSocket –æ–±—Ä–∞–±–æ—Ç–∫–∞:**
   - **X2**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –æ–±—â–∏–π `useSocket` —Å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏ —Å–æ–±—ã—Ç–∏–π –≤ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–µ
   - **X10**: –ò–º–µ–µ—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω—ã–π `useSocketX10` —Å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–æ–≤

3. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
   - **X2**: –ß–∏—Å—Ç–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å: –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è ‚Üí —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ ‚Üí –Ω–∞—á–∞–ª–æ –∏–≥—Ä—ã
   - **X10**: –ó–∞–ø—É—Ç–∞–Ω–Ω—ã–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –º–µ–∂–¥—É –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–µ–π, API-–≤—ã–∑–æ–≤–∞–º–∏ –∏ —Å–æ–∫–µ—Ç–∞–º–∏

4. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫:**
   - **X2**: –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Å —á–µ—Ç–∫–∏–º–∏ —Å–æ–æ–±—â–µ–Ω–∏—è–º–∏
   - **X10**: –†–∞–∑—Ä–æ–∑–Ω–µ–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤ —Ä–∞–∑–Ω—ã—Ö –º–µ—Å—Ç–∞—Ö —Å –¥—É–±–ª–∏—Ä—É—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–æ–π

### –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ X2 –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã

1. **–ú–æ–¥—É–ª—å–Ω–æ—Å—Ç—å:**
   - –ß–∏—Å—Ç–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ UI/–ª–æ–≥–∏–∫–∏/—Å–æ—Å—Ç–æ—è–Ω–∏—è
   - –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã —Å –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é

2. **–ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–π –ø–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö:**
   - –¶–µ–Ω—Ç—Ä–∞–ª–∏–∑–æ–≤–∞–Ω–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º
   - –û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä—É—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–∏

3. **–ù–∞–¥–µ–∂–Ω—ã–µ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π:**
   - –ß–µ—Ç–∫–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–∫–µ—Ç-—Å–æ–±—ã—Ç–∏–π
   - –ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

## üîç –î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ X2

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã X2

1. **–ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```typescript
// POST /api/telegram-user
interface TelegramUserRequest {
  telegramId: number;
  username: string;
  firstName?: string;
  lastName?: string;
}
```

2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è**
```typescript
// GET /api/user-data?telegramId={id}&_cache={timestamp}
interface UserDataResponse {
  success: boolean;
  data: {
    tickets: number;        // chance –±–∏–ª–µ—Ç—ã
    tonotChanceTickets: number;
    balance: number;        // tonot –±–∞–ª–∞–Ω—Å
    tonBalance: number;     // ton –±–∞–ª–∞–Ω—Å
  }
}
```

3. **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–∞—Ç—á–µ–º**
```typescript
// POST /api/match/create
interface CreateMatchRequest {
  telegramId: number;
  username: string;
  ticketsAmount: number;
}

// POST /api/match/join
interface JoinMatchRequest {
  telegramId: number;
  username: string;
  matchId: string;
}

// POST /api/match/cancel
interface CancelMatchRequest {
  telegramId: number;
  matchId: string;
}

// POST /api/match/complete
interface CompleteMatchRequest {
  matchId: string;
  winnerId: number;
  player1Id: number;
  player2Id: number;
  ticketsAmount: number;
}

// GET /api/match/active?telegramId={id}
interface ActiveMatchResponse {
  success: boolean;
  match?: {
    matchId: string;
    player1Id: number;
    player1Name: string;
    player2Id?: number;
    player2Name?: string;
    ticketsAmount: number;
    status: 'waiting' | 'playing' | 'completed';
    createdAt: string;
  }
}
```

4. **–û—á–∏—Å—Ç–∫–∞ –º–∞—Ç—á–µ–π**
```typescript
// POST /api/match/cleanup
interface CleanupMatchesRequest {
  telegramId: number;
}
```

### WebSocket —Å–æ–±—ã—Ç–∏—è X2

1. **–ö–ª–∏–µ–Ω—Ç ‚Üí –°–µ—Ä–≤–µ—Ä**
```typescript
// –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
interface JoinRoomEvent {
  telegramId: number;
  username: string;
  ticketsAmount: number;
}

// –í—ã—Ö–æ–¥ –∏–∑ –∫–æ–º–Ω–∞—Ç—ã
interface LeaveRoomEvent {
  telegramId: number;
  matchId: string;
}

// –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
interface CompleteGameEvent {
  matchId: string;
  winnerId: number;
  ticketsAmount: number;
}
```

2. **–°–µ—Ä–≤–µ—Ä ‚Üí –ö–ª–∏–µ–Ω—Ç**
```typescript
// –ù–∞–π–¥–µ–Ω —Å–æ–ø–µ—Ä–Ω–∏–∫
interface OpponentFoundEvent {
  matchId: string;
  player1Id: number;
  player1Name: string;
  player2Id: number;
  player2Name: string;
  ticketsAmount: number;
  createdAt: string;
}

// –ò–≥—Ä–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞
interface GameCompletedEvent {
  matchId: string;
  winnerId: number;
  ticketsAmount: number;
}
```

### –ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–æ–≤ API –≤ X2

1. **–í—Ö–æ–¥ –≤ –∏–≥—Ä–æ–≤—É—é –∫–æ–º–Ω–∞—Ç—É**
```typescript
// 1. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
await fetch('/api/telegram-user', {
  method: 'POST',
  body: JSON.stringify({
    telegramId: user.id,
    username: user.username
  })
});

// 2. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
const userData = await fetch(`/api/user-data?telegramId=${user.id}`);

// 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Ç—á–∞
const activeMatch = await fetch(`/api/match/active?telegramId=${user.id}`);
```

2. **–ó–∞–ø—É—Å–∫ –∏–≥—Ä—ã**
```typescript
// 1. –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞
const match = await fetch('/api/match/create', {
  method: 'POST',
  body: JSON.stringify({
    telegramId: user.id,
    username: user.username,
    ticketsAmount: 1
  })
});

// 2. WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ –æ–∂–∏–¥–∞–Ω–∏–µ —Å–æ–ø–µ—Ä–Ω–∏–∫–∞
socket.emit('join_room', {
  telegramId: user.id,
  username: user.username,
  ticketsAmount: 1
});

// 3. –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–æ–±—ã—Ç–∏—è –æ –Ω–∞–π–¥–µ–Ω–Ω–æ–º —Å–æ–ø–µ—Ä–Ω–∏–∫–µ
socket.on('opponent_found', (matchData) => {
  // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI –∏ –Ω–∞—á–∞–ª–æ –∏–≥—Ä—ã
});
```

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã**
```typescript
// 1. –û—Ç–ø—Ä–∞–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —á–µ—Ä–µ–∑ WebSocket
socket.emit('complete_game', {
  matchId: currentMatch.id,
  winnerId: winnerId,
  ticketsAmount: ticketsAmount
});

// 2. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ —á–µ—Ä–µ–∑ API
await fetch('/api/match/complete', {
  method: 'POST',
  body: JSON.stringify({
    matchId: currentMatch.id,
    winnerId: winnerId,
    player1Id: currentMatch.player1Id,
    player2Id: currentMatch.player2Id,
    ticketsAmount: ticketsAmount
  })
});

// 3. –û—á–∏—Å—Ç–∫–∞ –º–∞—Ç—á–µ–π
await fetch('/api/match/cleanup', {
  method: 'POST',
  body: JSON.stringify({
    telegramId: user.id
  })
});

// 4. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
await loadGameData();
```

### –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –≤ X2

1. **–°–µ—Ç–µ–≤—ã–µ –æ—à–∏–±–∫–∏**
```typescript
try {
  const response = await fetch('/api/match/create', ...);
  if (!response.ok) {
    throw new Error(`HTTP error! status: ${response.status}`);
  }
  // –û–±—Ä–∞–±–æ—Ç–∫–∞ —É—Å–ø–µ—à–Ω–æ–≥–æ –æ—Ç–≤–µ—Ç–∞
} catch (error) {
  console.error('[GameRoom] –û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ç—á–∞:', error);
  setError('–û—à–∏–±–∫–∞ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ç—á–∞. –ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑.');
}
```

2. **WebSocket –æ—à–∏–±–∫–∏**
```typescript
socket.on('error', (error) => {
  console.error('[Socket] –û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è:', error);
  setError('–û—à–∏–±–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è. –ü–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ...');
});

socket.on('disconnect', (reason) => {
  console.log('[Socket] –û—Ç–∫–ª—é—á–µ–Ω–æ:', reason);
  if (reason === 'io server disconnect') {
    socket.connect(); // –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
  }
});
```

### –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

```typescript
// –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
useEffect(() => {
  if (!telegramUser?.id) return;
  
  const balanceInterval = setInterval(() => {
    loadGameData();
  }, 15000);
  
  return () => clearInterval(balanceInterval);
}, [telegramUser?.id, loadGameData]);
```

### –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –∏ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

1. **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–ø—Ä–æ—Å–æ–≤**
```typescript
// –î–æ–±–∞–≤–ª–µ–Ω–∏–µ timestamp –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è
const cacheKey = Date.now();
const response = await fetch(`/api/user-data?telegramId=${id}&_cache=${cacheKey}`);
```

2. **–õ–æ–∫–∞–ª—å–Ω–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ**
```typescript
// –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è –≤ localStorage
const { value: savedGameRoomState, setValue: setSavedGameRoomState } = 
  useStorage<GameRoomSavedState>(STORAGE_KEYS.GAME_ROOM_STATE);
```

### –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

1. **Match (–ú–∞—Ç—á)**
```typescript
interface Match {
  matchId: string;
  player1Id: number;
  player1Name: string;
  player2Id?: number;
  player2Name?: string;
  ticketsAmount: number;
  status: 'waiting' | 'playing' | 'completed';
  createdAt: string;
  winner?: {
    id: number;
    amount: number;
  };
}
```

2. **GameState (–°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã)**
```typescript
interface GameState {
  status: 'idle' | 'waiting' | 'playing' | 'completed';
  match?: Match;
  waitingStartTime?: number;
  countdown: number;
  chancePhaseCompleted: boolean;
  result?: {
    status: 'win' | 'lose';
    winnerId?: number;
    ticketsAmount: number;
  };
}
```

–≠—Ç–æ –ø–æ–ª–Ω—ã–π –∞–Ω–∞–ª–∏–∑ API –∏ –∏—Ö –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤ X2. –¢–µ–ø–µ—Ä—å —è –≥–æ—Ç–æ–≤ —É—Å–ª—ã—à–∞—Ç—å, —á—Ç–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –ø–æ–ª—É—á–∏—Ç—å –≤ X10, –∏ –º—ã —Å–º–æ–∂–µ–º —Å–ø–ª–∞–Ω–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è.

## üìù –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ API X10 –Ω–∞ –æ—Å–Ω–æ–≤–µ X2

### –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è

–í X10 —Å–µ–π—á–∞—Å –º–Ω–æ–≥–æ –∏–∑–±—ã—Ç–æ—á–Ω—ã—Ö API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤:
- `/api/match/x10/active/route.ts`
- `/api/match/x10/create/route.ts`
- `/api/match/x10/join/route.ts`
- `/api/match/x10/cancel/route.ts`
- `/api/match/x10/complete/route.ts`
- `/api/match/x10/status/route.ts`

### –¶–µ–ª–µ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (–Ω–∞ –æ—Å–Ω–æ–≤–µ X2)

–ù—É–∂–Ω–æ –æ—Å—Ç–∞–≤–∏—Ç—å —Ç–æ–ª—å–∫–æ 3 –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞:

1. **create** - –°–æ–∑–¥–∞–Ω–∏–µ/–ø–æ–∏—Å–∫ –º–∞—Ç—á–∞
```typescript
// POST /api/match/x10/create
interface CreateX10Request {
  telegramId: number;
  username: string;
}

interface CreateX10Response {
  success: boolean;
  match?: {
    matchId: string;
    players: Array<{
      telegramId: number;
      name: string;
      joinedAt: Date;
    }>;
    status: 'waiting' | 'playing' | 'completed';
    currentPlayers: number;
    ticketsAmount: number;
  };
}
```

2. **cancel** - –û—Ç–º–µ–Ω–∞ –æ–∂–∏–¥–∞–Ω–∏—è/–≤—ã—Ö–æ–¥ –∏–∑ –º–∞—Ç—á–∞
```typescript
// POST /api/match/x10/cancel
interface CancelX10Request {
  telegramId: number;
  matchId?: string;
}
```

3. **complete** - –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∞—Ç—á–∞
```typescript
// POST /api/match/x10/complete
interface CompleteX10Request {
  matchId: string;
  winners: Array<{
    telegramId: number;
    name: string;
    prize: number;
  }>;
}
```

### –û—Å–Ω–æ–≤–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

1. **–û–±—ä–µ–¥–∏–Ω–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞**
- –ü–µ—Ä–µ–Ω–µ—Å—Ç–∏ –ª–æ–≥–∏–∫—É –∏–∑ `active` –∏ `join` –≤ `create`
- –£–¥–∞–ª–∏—Ç—å –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã `status` –∏ `join`
- –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å–æ—Å—Ç–æ—è–Ω–∏—è —á–µ—Ä–µ–∑ WebSocket —Å–æ–±—ã—Ç–∏—è

2. **–õ–æ–≥–∏–∫–∞ create/route.ts**
```typescript
export async function POST(request: Request) {
  // 1. –ü–æ–ª—É—á–∞–µ–º –¥–∞–Ω–Ω—ã–µ –∏–≥—Ä–æ–∫–∞
  const { telegramId, username } = await request.json();
  
  // 2. –ü—Ä–æ–≤–µ—Ä—è–µ–º –∞–∫—Ç–∏–≤–Ω—ã–π –º–∞—Ç—á
  const existingMatch = await MatchX10.findPlayerActiveMatch(telegramId);
  if (existingMatch) return { match: existingMatch };
  
  // 3. –ü—Ä–æ–≤–µ—Ä—è–µ–º –æ—á–µ—Ä–µ–¥—å –æ–∂–∏–¥–∞–Ω–∏—è
  const waitingPlayer = await WaitingPlayerX10.findOne({ telegramId });
  if (!waitingPlayer) {
    // –î–æ–±–∞–≤–ª—è–µ–º –≤ –æ—á–µ—Ä–µ–¥—å
    await WaitingPlayerX10.create({ telegramId, username });
  }
  
  // 4. –ò—â–µ–º –∏–ª–∏ —Å–æ–∑–¥–∞–µ–º –º–∞—Ç—á
  const availablePlayers = await WaitingPlayerX10.find({ status: 'waiting' })
    .limit(10).sort({ createdAt: 1 });
  
  if (availablePlayers.length === 10) {
    // –°–æ–∑–¥–∞–µ–º –º–∞—Ç—á —Å 10 –∏–≥—Ä–æ–∫–∞–º–∏
    const match = await MatchX10.createMatch(availablePlayers);
    
    // –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–±—ã—Ç–∏–µ –≤—Å–µ–º –∏–≥—Ä–æ–∫–∞–º
    io.to(match.matchId).emit('x10_players_found', { match });
    
    return { match, shouldStart: true };
  }
  
  return { status: 'waiting', playersCount: availablePlayers.length };
}
```

3. **WebSocket —Å–æ–±—ã—Ç–∏—è**
```typescript
// –ö–ª–∏–µ–Ω—Ç -> –°–µ—Ä–≤–µ—Ä
interface X10Events {
  'join_x10_room': {
    telegramId: number;
    username: string;
  };
  'leave_x10_room': {
    telegramId: number;
    matchId: string;
  };
  'complete_x10_game': {
    matchId: string;
    winners: Array<{
      telegramId: number;
      name: string;
      prize: number;
    }>;
  };
}

// –°–µ—Ä–≤–µ—Ä -> –ö–ª–∏–µ–Ω—Ç
interface X10ServerEvents {
  'x10_players_found': {
    match: X10Match;
  };
  'x10_game_starting': {
    matchId: string;
    countdown: number;
  };
  'x10_game_completed': {
    matchId: string;
    winners: Array<{
      telegramId: number;
      name: string;
      prize: number;
    }>;
  };
}
```

### –ü–ª–∞–Ω –º–∏–≥—Ä–∞—Ü–∏–∏

1. **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞**
- –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Ç–µ–∫—É—â–∏—Ö —Ñ–∞–π–ª–æ–≤
- –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å –Ω–æ–≤—ã–µ –≤–µ—Ä—Å–∏–∏ –º–æ–¥–µ–ª–µ–π –∏ —Ç–∏–ø–æ–≤

2. **–≠—Ç–∞–ø 2: API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã**
- –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π `create/route.ts` —Å –ª–æ–≥–∏–∫–æ–π –¥–ª—è 10 –∏–≥—Ä–æ–∫–æ–≤
- –û–±–Ω–æ–≤–∏—Ç—å `cancel/route.ts` –∏ `complete/route.ts`
- –£–¥–∞–ª–∏—Ç—å –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ —Ñ–∞–π–ª—ã

3. **–≠—Ç–∞–ø 3: WebSocket**
- –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
- –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤—ã–µ —Å–æ–±—ã—Ç–∏—è –¥–ª—è X10
- –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥

4. **–≠—Ç–∞–ø 4: –ö–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥**
- –û–±–Ω–æ–≤–∏—Ç—å `useGameStateX10` —Ö—É–∫
- –û–±–Ω–æ–≤–∏—Ç—å –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –Ω–æ–≤—ã–º API
- –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏

### –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã

1. **–û—á–µ—Ä–µ–¥—å –∏–≥—Ä–æ–∫–æ–≤**
- –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ –∏–∑ –æ—á–µ—Ä–µ–¥–∏
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏–π

2. **–°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞**
- –ê—Ç–æ–º–∞—Ä–Ω–∞—è –æ–ø–µ—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è
- –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –≤—Å–µ—Ö –∏–≥—Ä–æ–∫–æ–≤
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤

3. **–ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã**
- –í–∞–ª–∏–¥–∞—Ü–∏—è –ø–æ–±–µ–¥–∏—Ç–µ–ª–µ–π
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤
- –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ —Ç–∞–π–º–∞—É—Ç–æ–≤

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π `create/route.ts` –Ω–∞ –æ—Å–Ω–æ–≤–µ X2
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞ —Å 10 –∏–≥—Ä–æ–∫–∞–º–∏
3. –û–±–Ω–æ–≤–∏—Ç—å WebSocket —Å–æ–±—ã—Ç–∏—è
4. –û–±–Ω–æ–≤–∏—Ç—å –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π –∫–æ–¥
5. –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìã –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∞–π–ª–æ–≤ –¥–ª—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏

### üî• –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- [x] `src/@types/x10.ts` - –ë–∞–∑–æ–≤—ã–µ —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã
- [x] `src/@types/x10Socket.d.ts` - –¢–∏–ø—ã –¥–ª—è WebSocket —Å–æ–±—ã—Ç–∏–π
- [x] `src/models/MatchX10.js` - –ú–æ–¥–µ–ª—å –º–∞—Ç—á–∞ X10
- [x] `src/models/WaitingPlayerX10.js` - –ú–æ–¥–µ–ª—å –æ–∂–∏–¥–∞—é—â–µ–≥–æ –∏–≥—Ä–æ–∫–∞
- [x] `src/app/api/match/x10/game/route.ts` - –û—Å–Ω–æ–≤–Ω–æ–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç

### üöÄ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ö–ª—é—á–µ–≤—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã)
- [ ] `src/app/api/socket/x10/handlers.ts` - –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ WebSocket
- [ ] `src/hooks/useSocketX10.ts` - –•—É–∫ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å WebSocket
- [ ] `src/contexts/X10RoomContext.tsx` - –ö–æ–Ω—Ç–µ–∫—Å—Ç –∫–æ–º–Ω–∞—Ç—ã X10
- [ ] `src/utils/x10Utils.ts` - –£—Ç–∏–ª–∏—Ç—ã –¥–ª—è X10
- [ ] `src/utils/api/x10Api.ts` - API –∫–ª–∏–µ–Ω—Ç

### üîÑ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã UI –∏ –ª–æ–≥–∏–∫–∞)
- [ ] `src/components/GameRoomX10/GameRoomX10Container.tsx` - –û—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç
- [ ] `src/hooks/useGameStateX10.ts` - –•—É–∫ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
- [ ] `src/@types/x10Socket.ts` - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–æ–∫–µ—Ç–æ–≤
- [ ] `src/app/api/match/x10Models.ts` - –ú–æ–¥–µ–ª–∏ API

### üéØ –ü–ª–∞–Ω –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º

#### –≠—Ç–∞–ø 1: –§—É–Ω–¥–∞–º–µ–Ω—Ç–∞–ª—å–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã
1. –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã –≤ `x10.ts` –∏ `x10Socket.d.ts`
2. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –º–æ–¥–µ–ª–∏ `MatchX10.js` –∏ `WaitingPlayerX10.js`
3. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π API —ç–Ω–¥–ø–æ–∏–Ω—Ç `game/route.ts`

#### –≠—Ç–∞–ø 2: –°–µ—Ç–µ–≤–æ–π —Å–ª–æ–π
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å WebSocket –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –≤ `handlers.ts`
2. –û–±–Ω–æ–≤–∏—Ç—å —Ö—É–∫ `useSocketX10.ts`
3. –£–ª—É—á—à–∏—Ç—å API –∫–ª–∏–µ–Ω—Ç `x10Api.ts`
4. –û–±–Ω–æ–≤–∏—Ç—å —É—Ç–∏–ª–∏—Ç—ã –≤ `x10Utils.ts`

#### –≠—Ç–∞–ø 3: UI –∏ —Å–æ—Å—Ç–æ—è–Ω–∏–µ
1. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç `X10RoomContext.tsx`
2. –û–±–Ω–æ–≤–∏—Ç—å —Ö—É–∫ `useGameStateX10.ts`
3. –ü–µ—Ä–µ—Ä–∞–±–æ—Ç–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç `GameRoomX10Container.tsx`

### üîç –ö—Ä–∏—Ç–µ—Ä–∏–∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞

1. –¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –Ω–æ–≤–æ–π –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ
2. –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
3. –û—á–∏—Å—Ç–∫–∞ —Ä–µ—Å—É—Ä—Å–æ–≤ –∏ –æ—Ç–ø–∏—Å–∫–∞ –æ—Ç —Å–æ–±—ã—Ç–∏–π
4. –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
5. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ –∞–∫—Ç—É–∞–ª—å–Ω—ã

### üìù –ü—Ä–æ—Ü–µ—Å—Å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è

1. –°–æ–∑–¥–∞—Ç—å –≤–µ—Ç–∫—É –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —ç—Ç–∞–ø–∞
2. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∫–∞–∂–¥—ã–π –æ–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π —Ñ–∞–π–ª
3. –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º –∫–æ–¥–æ–º
4. –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è
5. –ü—Ä–æ–≤–æ–¥–∏—Ç—å –∫–æ–¥-—Ä–µ–≤—å—é

## üìù –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–û–±–Ω–æ–≤–ª–µ–Ω–æ 14.03.2024)

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **API –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - ‚ùå –£–¥–∞–ª—ë–Ω `/api/match/x10/active/route.ts`
   - ‚ùå –£–¥–∞–ª—ë–Ω `/api/match/x10/status/route.ts`
   - ‚ùå –£–¥–∞–ª—ë–Ω `/api/match/x10/join/route.ts`
   - ‚úÖ –ö–∞–∂–¥—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç —Ç–µ–ø–µ—Ä—å –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é:
     - `/api/match/x10/create/route.ts` - —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã
     - `/api/match/x10/game/route.ts` - –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π API –æ —Å–æ—Å—Ç–æ—è–Ω–∏–∏ –∏–≥—Ä—ã
     - `/api/match/x10/cancel/route.ts` - –æ—Ç–º–µ–Ω–∞ —É—á–∞—Å—Ç–∏—è
     - `/api/match/x10/complete/route.ts` - –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
   - ‚úÖ –£–ª—É—á—à–µ–Ω–∞ –∏–∑–æ–ª—è—Ü–∏—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞
   - ‚úÖ –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –º–µ–∂–¥—É —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞–º–∏

2. **–£–ø—Ä–æ—â–µ–Ω–∏–µ API —Å—Ç—Ä—É–∫—Ç—É—Ä—ã:**
   - –ë—ã–ª–æ: 5 —Å–º–µ—à–∞–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ —Å –ø–µ—Ä–µ—Å–µ–∫–∞—é—â–µ–π—Å—è –ª–æ–≥–∏–∫–æ–π (active, status, join)
   - –°—Ç–∞–ª–æ: 4 –∏–∑–æ–ª–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —ç–Ω–¥–ø–æ–∏–Ω—Ç–∞ —Å —á—ë—Ç–∫–æ–π –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å—é:
     1. create - –æ—Ç–≤–µ—á–∞–µ—Ç –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –∏–≥—Ä—ã
     2. game - –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç–µ–∫—É—â–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏
     3. cancel - —É–ø—Ä–∞–≤–ª—è–µ—Ç –æ—Ç–º–µ–Ω–æ–π —É—á–∞—Å—Ç–∏—è
     4. complete - –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –∏–≥—Ä—ã
   - –ö–∞–∂–¥—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç –æ—Ç–≤–µ—á–∞–µ—Ç —Ç–æ–ª—å–∫–æ –∑–∞ —Å–≤–æ—é —Ñ—É–Ω–∫—Ü–∏—é
   - –£–ª—É—á—à–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å –∫–æ–¥–∞

3. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è:**
   - ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è Telegram –Ω–æ—Ç–∏—Ñ–∏–∫–∞—Ü–∏–π:
     ```env
     TELEGRAM_NOTIFICATION_BOT_TOKEN=7223772208:AAGKWizExXbSSpIZbrsl9t3jorUy5mhwREk
     TELEGRAM_WEBHOOK_URL=https://tonot-chance.vercel.app/api/telegram-webhook
     TELEGRAM_ADMIN_CHAT_ID=6524616707
     ```

4. **–°–±–æ—Ä–∫–∞:**
   - ‚úÖ –£—Å–ø–µ—à–Ω–∞—è —Å–±–æ—Ä–∫–∞ –ø—Ä–æ–µ–∫—Ç–∞
   - ‚úÖ –í—Å–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã —Å–æ–±—Ä–∞–Ω—ã
   - ‚úÖ WebSocket —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–∞

### üîç –ü–ª–∞–Ω —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∫–∞ X2 (–∫—Ä–∏—Ç–∏—á–Ω–æ):**
   - [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã
   - [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞
   - [ ] –ü—Ä–æ–≤–µ–¥–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ —Ü–∏–∫–ª–∞ –∏–≥—Ä—ã
   - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤

2. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ X10:**
   - [ ] –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–º–Ω–∞—Ç—ã —á–µ—Ä–µ–∑ –Ω–æ–≤—ã–π API
   - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—á–µ—Ä–µ–¥–∏ –∏–≥—Ä–æ–∫–æ–≤
   - [ ] –¢–µ—Å—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –¥–æ 10 –∏–≥—Ä–æ–∫–æ–≤
   - [ ] –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø—Ä–∏–∑–æ–≤

3. **–ü—Ä–æ–≤–µ—Ä–∫–∞ WebSocket:**
   - [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –∫–æ–º–Ω–∞—Ç–µ
   - [ ] –°–æ–±—ã—Ç–∏—è –∏–≥—Ä–æ–∫–æ–≤
   - [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏–π
   - [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—Ç–∫–ª—é—á–µ–Ω–∏–π

### ‚ö†Ô∏è –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è:

1. **WebSocket:**
   - –ï—Å–ª–∏ –≤–æ–∑–Ω–∏–∫–Ω—É—Ç –ø—Ä–æ–±–ª–µ–º—ã —Å —Å–æ–∫–µ—Ç–∞–º–∏, —Å–≤–µ—Ä–∏–º —Å —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–µ–π X2
   - –ü—Ä–æ–≤–µ—Ä–∏–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π –≤ `handlers.ts`
   - –°—Ä–∞–≤–Ω–∏–º –ª–æ–≥–∏–∫—É –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

2. **API –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è:**
   - –ü—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å API –ø—Ä–æ–≤–µ—Ä–∏–º —Ñ–æ—Ä–º–∞—Ç—ã –¥–∞–Ω–Ω—ã—Ö
   - –°–≤–µ—Ä–∏–º —Ç–∏–ø—ã –∑–∞–ø—Ä–æ—Å–æ–≤/–æ—Ç–≤–µ—Ç–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏–º –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫

3. **–ë–∞–ª–∞–Ω—Å—ã –∏ –±–∏–ª–µ—Ç—ã:**
   - –û—Ç—Å–ª–µ–¥–∏–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤
   - –ü—Ä–æ–≤–µ—Ä–∏–º —Å–ø–∏—Å–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤
   - –°–≤–µ—Ä–∏–º –Ω–∞—á–∏—Å–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤

### üîÑ –ü–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞:

1. **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å X2:**
   - –û—Ç–∫–∞—Ç–∏—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
   - –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å—Ç–∞—Ä—ã–µ —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å WebSocket —Å–æ–±—ã—Ç–∏—è

2. **–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º—ã —Å X10:**
   - –û—Å—Ç–∞–≤–∏—Ç—å X2 —Ä–∞–±–æ—Ç–∞—é—â–∏–º
   - –û—Ç–ª–∞–¥–∏—Ç—å X10 –æ—Ç–¥–µ–ª—å–Ω–æ
   - –ü–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ –≤–Ω–µ–¥—Ä—è—Ç—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ Telegram:**
   - –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç–æ–≤—É—é –∏–≥—Ä—É X2
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
   - –ó–∞—Ñ–∏–∫—Å–∏—Ä–æ–≤–∞—Ç—å –ª—é–±—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

2. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥:**
   - –°–ª–µ–¥–∏—Ç—å –∑–∞ –ª–æ–≥–∞–º–∏ WebSocket
   - –û—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å API –∑–∞–ø—Ä–æ—Å—ã
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –ò—Å–ø—Ä–∞–≤–∏—Ç—å –Ω–∞–π–¥–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã
   - –£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### üí° –ö–ª—é—á–µ–≤—ã–µ –º–æ–º–µ–Ω—Ç—ã –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏:

1. **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
   - WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∏ —Å–æ–±—ã—Ç–∏—è
   - –°–æ–∑–¥–∞–Ω–∏–µ –∏ –ø–æ–∏—Å–∫ –º–∞—Ç—á–µ–π
   - –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤

2. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –æ–ø—ã—Ç:**
   - –í—Ä–µ–º—è –æ—Ç–∫–ª–∏–∫–∞ API
   - –°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å WebSocket
   - –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π

3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
   - –í–∞–ª–∏–¥–∞—Ü–∏—è –≤—Ö–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–æ–≤
   - –ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –æ–ø–µ—Ä–∞—Ü–∏–π

## üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (14.03.2024 01:56)

### ‚úÖ –£—Å–ø–µ—à–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:

1. **–†–µ–∂–∏–º X2:**
   - ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–µ–Ω
   - ‚úÖ –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –∏ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∞—Ç—á–∞
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–æ–≤
   - ‚úÖ –õ–æ–≥–∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–∞—é—Ç —É—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ: `[API match/complete] –£—Å–ø–µ—à–Ω–æ–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ –º–∞—Ç—á–∞`

2. **–†–µ–∂–∏–º X10:**
   - ‚úÖ –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥ –≤ –∫–æ–º–Ω–∞—Ç—É
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞
   - ‚úÖ UI —ç–ª–µ–º–µ–Ω—Ç—ã –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - ‚úÖ API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã –æ—Ç–≤–µ—á–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:**
   ```log
   GET 404 /api/socket/io
   –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: j: xhr poll error
   ```
   - ‚ùå –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - ‚ùå 404 –æ—à–∏–±–∫–∏ –ø—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ

2. **–ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:**
   - API –∑–∞–ø—Ä–æ—Å—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
     ```log
     GET 200 /api/user-data
     [API user-data] –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–π–¥–µ–Ω: 6524616707
     ```
   - WebSocket –Ω–µ –º–æ–∂–µ—Ç —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ:
     ```log
     GET 404 /api/socket/io?EIO=4&transport=polling
     ```

### üí° –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Socket.IO:**
   - –ù–µ–≤–µ—Ä–Ω—ã–π –ø—É—Ç—å –¥–ª—è WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –í–æ–∑–º–æ–∂–Ω–æ, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Å—Ç–∞—Ä—ã–π —Ñ–æ—Ä–º–∞—Ç URL
   - –ü—Ä–æ–±–ª–µ–º–∞ —Å Engine.IO –≤–µ—Ä—Å–∏–µ–π

2. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —Å X2:**
   - X2 –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —É—Å–ø–µ—à–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å–æ–∫–µ—Ç–æ–≤
   - –ù—É–∂–Ω–æ —Å–≤–µ—Ä–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

### üîÑ –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

1. **–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Socket.IO:**
   - –°–≤–µ—Ä–∏—Ç—å URL –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —Å X2
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤–µ—Ä—Å–∏—é Engine.IO
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ –ø—É—Ç–µ–π

2. **–û–±–Ω–æ–≤–∏—Ç—å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏:**
   - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å X2
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
   - –î–æ–±–∞–≤–∏—Ç—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –æ—Ç–ª–∞–¥–∫–∏

3. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ WebSocket
   - –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —Å–æ–±—ã—Ç–∏—è
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è

### üìù –í—ã–≤–æ–¥—ã:

1. **–ü–æ–∑–∏—Ç–∏–≤–Ω—ã–µ –º–æ–º–µ–Ω—Ç—ã:**
   - ‚úÖ –û—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞ API —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ X2 —Ä–µ–∂–∏–º –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω
   - ‚úÖ UI X10 –∑–∞–≥—Ä—É–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

2. **–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è:**
   - ‚ö†Ô∏è WebSocket –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
   - ‚ö†Ô∏è –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Socket.IO
   - ‚ö†Ô∏è –û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π

### üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:

1. –°–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é WebSocket —Å X2
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø—É—Ç–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
3. –û–±–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
4. –ü—Ä–æ–≤–µ—Å—Ç–∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

## üìä –ê–Ω–∞–ª–∏–∑ WebSocket –ø—Ä–æ–±–ª–µ–º (–û–±–Ω–æ–≤–ª–µ–Ω–æ 14.03.2024)

### üîç –í—ã—è–≤–ª–µ–Ω–Ω—ã–µ —Ä–∞–∑–ª–∏—á–∏—è X2 vs X10:

1. **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Socket.IO:**
   - ‚úÖ X2: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç `/api/socket` —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–µ–π–º—Å–ø–µ–π—Å–∞–º–∏
   - ‚ùå X10: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å `/api/socket/io`

2. **Heartbeat —Å–∏—Å—Ç–µ–º–∞:**
   - ‚úÖ X2: –ù–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç heartbeat (–ø—Ä–æ—Å—Ç–∞—è –∏ –Ω–∞–¥–µ–∂–Ω–∞—è —Å—Ö–µ–º–∞)
   - ‚ùå X10: –†–µ–∞–ª–∏–∑—É–µ—Ç –∏–∑–±—ã—Ç–æ—á–Ω—É—é heartbeat —Å–∏—Å—Ç–µ–º—É, –≤—ã–∑—ã–≤–∞—é—â—É—é –æ—à–∏–±–∫–∏

3. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π:**
   - ‚úÖ X2: –ß–∏—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ telegramId –∏–∑ query –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤
   - ‚ùå X10: –£—Å–ª–æ–∂–Ω–µ–Ω–Ω–∞—è –ª–æ–≥–∏–∫–∞ —Å –¥–æ–ø. –ø—Ä–æ–≤–µ—Ä–∫–∞–º–∏

### üéØ –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–ö—Ä–∏—Ç–∏—á–Ω—ã–µ —Ñ–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
   - `src/app/api/socket/x10/handlers.ts` - —É–±—Ä–∞—Ç—å heartbeat
   - `src/hooks/useSocketX10.ts` - –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—É—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - `src/app/api/socket/route.ts` - –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –Ω–µ–π–º—Å–ø–µ–π—Å–æ–≤

2. **–ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:**
   1. –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Socket.IO —Å X2
   2. –£–±—Ä–∞—Ç—å heartbeat —Å–∏—Å—Ç–µ–º—É
   3. –£–ø—Ä–æ—Å—Ç–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π

3. **–†–∏—Å–∫–∏:**
   - –ù–µ–æ–±—Ö–æ–¥–∏–º–æ —Å–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å–ø–µ—Ü–∏—Ñ–∏–∫—É X10 (10 –∏–≥—Ä–æ–∫–æ–≤, –ø—Ä–∏–∑—ã)
   - –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ç–µ–∫—É—â—É—é –ª–æ–≥–∏–∫—É –º–∞—Ç—á–µ–π
   - –ù–µ –∑–∞—Ç—Ä–æ–Ω—É—Ç—å –±–∞–ª–∞–Ω—Å –∏ –±–∏–ª–µ—Ç—ã

### ‚ö†Ô∏è –¢–µ–∫—É—â–∏–µ –ø—Ä–æ–±–ª–µ–º—ã:
```log
GET 404 /api/socket/io
–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è: xhr poll error
Unhandled message type: heartbeat
```

### ‚úÖ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –°—Ç–∞–±–∏–ª—å–Ω–æ–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤—Å–µ–π –±–∏–∑–Ω–µ—Å-–ª–æ–≥–∏–∫–∏ X10

## üìù –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è WebSocket –ª–æ–≥–∏–∫–∏ (14.03.2024 03:15)

### üîç –ê–Ω–∞–ª–∏–∑ –ª–æ–≥–æ–≤:
```log
[API user-data] GET 200 OK - –ë–∞–ª–∞–Ω—Å –∏ –¥–∞–Ω–Ω—ã–µ —Ä–∞–±–æ—Ç–∞—é—Ç
[Socket X10] Heartbeat - –õ–∏—à–Ω–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è
[Socket X10] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ - –ù–µ–æ–ø—Ç–∏–º–∞–ª—å–Ω–æ
```

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **useSocketX10.ts:**
   ```diff
   - // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ –º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏
   - useEffect(() => {
   -   if (telegramUser?.id) {
   -     connect();
   -   }
   - }, [telegramUser]);

   + // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∏–≥—Ä—É
   + const joinX10Room = async () => {
   +   const connected = await connect();
   +   if (!connected) return false;
   +   // ... –æ—Å—Ç–∞–ª—å–Ω–∞—è –ª–æ–≥–∏–∫–∞
   + }
   ```

2. **GameRoomX10Container.tsx:**
   ```diff
   - // –ê–≤—Ç–æ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–æ–∫–µ—Ç—É
   - useEffect(() => {
   -   if (!socketConnected) connect();
   - }, []);

   + // –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ —á–µ—Ä–µ–∑ handleJoinRoom
   + const handleJoinRoom = async () => {
   +   // –°–Ω–∞—á–∞–ª–∞ API –∑–∞–ø—Ä–æ—Å
   +   const { match } = await checkActiveMatch();
   +   // –ü–æ—Ç–æ–º —Å–æ–∫–µ—Ç –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
   +   if (match) await connect();
   + }
   ```

3. **X10RoomContext.tsx:**
   ```diff
   useEffect(() => {
   - if (!socket.isConnected) return;
   + // –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Å–æ–±—ã—Ç–∏—è —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä–µ
   + if (!socket.isConnected || state.gameState.status === 'idle') return;
     // ... –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–±—ã—Ç–∏–π
   }, [socket, state.gameState.status]);
   ```

### üîÑ –ü—Ä–∏–Ω—Ü–∏–ø —Ä–∞–±–æ—Ç—ã:

1. **API –∑–∞–ø—Ä–æ—Å—ã:**
   - –ë–∞–ª–∞–Ω—Å –∏ –¥–∞–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –º–∞—Ç—á–∞
   - –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è (15 —Å–µ–∫)

2. **WebSocket:**
   - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –¢–û–õ–¨–ö–û –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∏–≥—Ä—É
   - ‚úÖ –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –≤—ã—Ö–æ–¥–∞
   - ‚úÖ –°–æ–±—ã—Ç–∏—è —Ç–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∏–≥—Ä—ã

3. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è:**
   - –ú–µ–Ω—å—à–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π –∫ WebSocket
   - –ù–µ—Ç –ª–∏—à–Ω–∏—Ö heartbeat —Å–æ–æ–±—â–µ–Ω–∏–π
   - –ß–∏—Å—Ç–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π

### üìä –û–∂–∏–¥–∞–µ–º—ã–µ —É–ª—É—á—à–µ–Ω–∏—è:

1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - –ú–µ–Ω—å—à–µ —Å–µ—Ç–µ–≤—ã—Ö –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–π
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
   - –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä

2. **–°—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç—å:**
   - –ß—ë—Ç–∫–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ API/WebSocket
   - –ü—Ä–µ–¥—Å–∫–∞–∑—É–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ
   - –ú–µ–Ω—å—à–µ –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

3. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
   - WebSocket —Ç–æ–ª—å–∫–æ –¥–ª—è –∞–∫—Ç–∏–≤–Ω—ã—Ö –∏–≥—Ä
   - –°–Ω–∏–∂–µ–Ω–∏–µ –Ω–∞–≥—Ä—É–∑–∫–∏ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –õ—É—á—à–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø—Ä–∏ –º–Ω–æ–≥–∏—Ö –∏–≥—Ä–æ–∫–∞—Ö

### üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –í—ã–ø–æ–ª–Ω–∏—Ç—å –±–∏–ª–¥
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –≤ —Ä–µ–∞–ª—å–Ω—ã—Ö —É—Å–ª–æ–≤–∏—è—Ö
3. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
4. –°–æ–±—Ä–∞—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

## üìù –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (14.03.2024 03:30)

### üîç –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã:
```log
[X10] –û—à–∏–±–∫–∞ –ø—Ä–∏ –ø–æ–ª—É—á–µ–Ω–∏–∏ —Å—Ç–∞—Ç—É—Å–∞ –∏–≥—Ä—ã: TypeError: (0 , o.ZP) is not a function
at g (/var/task/.next/server/app/api/match/x10/game/route.js:1:885)
```

### üéØ –ü—Ä–∏—á–∏–Ω–∞:
- ‚ùå –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–ª—Å—è –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç–Ω–¥–ø–æ–∏–Ω—Ç `/api/match/x10/game`
- ‚ùå –§—É–Ω–∫—Ü–∏—è `checkActiveMatch` –ø—ã—Ç–∞–ª–∞—Å—å –ø–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç—É—Å —á–µ—Ä–µ–∑ game
- ‚úÖ –ù—É–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `/api/match/x10/create` –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç—á–∞

### ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è:

1. **GameRoomX10Container.tsx:**
   ```diff
   - // 1. –ü—Ä–æ–≤–µ—Ä—è–µ–º/—Å–æ–∑–¥–∞–µ–º –º–∞—Ç—á —á–µ—Ä–µ–∑ API
   - const { success, match, error } = await checkActiveMatch(telegramUser.id);
   
   + // 1. –°–æ–∑–¥–∞–µ–º –º–∞—Ç—á —á–µ—Ä–µ–∑ API create
   + const { success, match, error } = await fetch(
   +   `/api/match/x10/create?telegramId=${telegramUser.id}`,
   +   {
   +     method: 'POST',
   +     headers: { 'Content-Type': 'application/json' },
   +     body: JSON.stringify({
   +       telegramId: telegramUser.id,
   +       username: telegramUser.username || 'Unknown'
   +     })
   +   }
   + ).then(res => res.json());
   ```

2. **–£–¥–∞–ª–µ–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã:**
   ```diff
   - import { checkActiveMatch } from '@/utils/api/x10Api';
   ```

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è:

1. **API –∑–∞–ø—Ä–æ—Å—ã:**
   - ‚úÖ `/api/user-data` —Ä–∞–±–æ—Ç–∞–µ—Ç (200 OK)
   - ‚úÖ `/api/match/x10/create` —Å–æ–∑–¥–∞–µ—Ç –º–∞—Ç—á
   - ‚úÖ –ë–∞–ª–∞–Ω—Å –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥

2. **WebSocket:**
   - ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ –ø—Ä–∏ –≤—Ö–æ–¥–µ –≤ –∏–≥—Ä—É
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏–π
   - ‚úÖ –ù–µ—Ç –æ—à–∏–±–æ–∫ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

3. **–ò–≥—Ä–æ–≤–æ–π –ø—Ä–æ—Ü–µ—Å—Å:**
   - ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç
   - ‚úÖ –ë–∞–ª–∞–Ω—Å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è
   - ‚úÖ –°–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞–Ω—ã

### üîÑ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ª–æ–≥–∏ –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –¥—Ä—É–≥–∏—Ö –æ—à–∏–±–æ–∫
2. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–≥—Ä–æ–≤—ã–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏
3. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å —Ä–∞–∑–Ω—ã–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ–º –∏–≥—Ä–æ–∫–æ–≤

### üéØ –¢–µ–∫—É—â–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (14.03.2024)

#### 1. –ü—Ä–æ–±–ª–µ–º–∞ —Å –±–∏–ª–µ—Ç–∞–º–∏ –≤ X10
- –í —Ä–∞–∑–Ω—ã—Ö —á–∞—Å—Ç—è—Ö —Å–∏—Å—Ç–µ–º—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ä–∞–∑–Ω—ã–µ –Ω–∞–∑–≤–∞–Ω–∏—è –¥–ª—è –±–∏–ª–µ—Ç–æ–≤:
  - –í –ë–î: `tickets` –∏ `tonotChanceTickets`
  - –í API –∏ —Ç–∏–ø–∞—Ö: —Å–º–µ—à–∞–Ω–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ `chance` –∏ `tickets`
  - –≠—Ç–æ —Å–æ–∑–¥–∞–µ—Ç –ø—É—Ç–∞–Ω–∏—Ü—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ç—á–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–µ –±–∞–ª–∞–Ω—Å–∞

#### 2. –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π
1. **API Create Route** (`src/app/api/match/x10/create/route.ts`):
   - ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ –ø–æ–ª–µ `tickets` –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∞–ª–∞–Ω—Å–∞
   - ‚úÖ –ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ —Å–ø–∏—Å—ã–≤–∞–µ—Ç –±–∏–ª–µ—Ç—ã —á–µ—Ä–µ–∑ `$inc: { tickets: -X10_CONSTANTS.TICKET_REQUIRED }`

2. **Socket Handler** (`src/app/api/socket/x10/handlers.ts`):
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–ª–µ—Ç–æ–≤ —Å `user.chance` –Ω–∞ `user.tickets`
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–ø–∏—Å–∞–Ω–∏–µ –±–∏–ª–µ—Ç–æ–≤

3. **Game Container** (`src/components/GameRoomX10/GameRoomX10Container.tsx`):
   - ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∞–ª–∞–Ω—Å–∞ —Å `balance.chance` –Ω–∞ `balance.tickets`

4. **–¢–∏–ø—ã** (`src/@types/x10.ts`):
   - ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å `X10Balance` –¥–ª—è —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Å –ë–î

#### 3. –ö—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –º–æ–º–µ–Ω—Ç—ã
- –ù–µ —Ç—Ä–æ–≥–∞–µ–º –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –±–∞–ª–∞–Ω—Å–∞ –≤ `GameHeaderX10.tsx` - –æ–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –ò–∑–º–µ–Ω–µ–Ω–∏—è —Ç–æ–ª—å–∫–æ –≤ –ª–æ–≥–∏–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç—á–∞ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ –±–∏–ª–µ—Ç–æ–≤
- –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –ª–æ–≥–∏–∫–æ–π X2

## üìù –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è (14.03.2024 05:30)

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ X10:

1. **–£–¥–∞–ª–µ–Ω–∏–µ —Ü–µ–Ω—ã –±–∏–ª–µ—Ç–∞:**
   - ‚ùå –£–±—Ä–∞–Ω `TICKET_PRICE: 100` –∏–∑ X10_CONFIG
   - ‚úÖ –û—Å—Ç–∞–≤–ª–µ–Ω–∞ —Ç–æ–ª—å–∫–æ –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –±–∏–ª–µ—Ç–∞ (–∫–∞–∫ –≤ X2)
   - ‚úÖ –ù–µ—Ç –ø—Ä–∏–≤—è–∑–∫–∏ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ü–µ–Ω–µ –≤ –¢–û–ù–û–¢

2. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–∏–∑–æ–≤–æ–≥–æ —Ñ–æ–Ω–¥–∞:**
   - ‚úÖ –ë–∞–Ω–∫ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ 10 –±–∏–ª–µ—Ç–æ–≤ = 900 –¢–û–ù–û–¢
   - ‚úÖ –ü—Ä–∏–∑—ã –æ—Å—Ç–∞—é—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω—ã–º–∏:
     ```typescript
     PRIZES: {
       FIRST: 450,   // 50% –æ—Ç –±–∞–Ω–∫–∞
       SECOND: 270,  // 30% –æ—Ç –±–∞–Ω–∫–∞
       THIRD: 180    // 20% –æ—Ç –±–∞–Ω–∫–∞
     }
     ```

3. **–õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã:**
   - ‚úÖ –ü—Ä–∏ –≤—Ö–æ–¥–µ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞–ª–∏—á–∏–µ –±–∏–ª–µ—Ç–∞
   - ‚úÖ –ü—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –º–∞—Ç—á–∞ —Å–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è 1 –±–∏–ª–µ—Ç —Å –∫–∞–∂–¥–æ–≥–æ –∏–≥—Ä–æ–∫–∞
   - ‚úÖ 10 –±–∏–ª–µ—Ç–æ–≤ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É—é—Ç –±–∞–Ω–∫ –≤ 900 –¢–û–ù–û–¢
   - ‚úÖ –ü—Ä–∏–∑—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ: 450/270/180

### üîç –ü—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:
- ‚úÖ `src/@types/x10Socket.d.ts` - —É–¥–∞–ª–µ–Ω–∞ —Ü–µ–Ω–∞ –±–∏–ª–µ—Ç–∞
- ‚úÖ `src/utils/x10Utils.ts` - –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å –ø—Ä–∏–∑–æ–≤
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤—Å–µ —Ñ–∞–π–ª—ã X10 –Ω–∞ —É–ø–æ–º–∏–Ω–∞–Ω–∏–µ —Ü–µ–Ω—ã –≤ 100 –¢–û–ù–û–¢

### üìä –†–µ–∑—É–ª—å—Ç–∞—Ç:
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–∞–∫ X2 (–ø—Ä–æ–≤–µ—Ä–∫–∞ –±–∏–ª–µ—Ç–∞)
- ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –ø—Ä–∏–∑–æ–≤–æ–≥–æ —Ñ–æ–Ω–¥–∞ X10
- ‚úÖ –£–±—Ä–∞–Ω—ã –≤—Å–µ —É–ø–æ–º–∏–Ω–∞–Ω–∏—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π —Ü–µ–Ω—ã
- ‚úÖ –ö–æ–¥ —Å—Ç–∞–ª —á–∏—â–µ –∏ –ø–æ–Ω—è—Ç–Ω–µ–µ

### üìù –ê–Ω–∞–ª–∏–∑ –ø–æ–ø—ã—Ç–∫–∏ #9 (14.03.2024 06:00)

#### üîç –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:
1. **–ë–∞–ª–∞–Ω—Å –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è:**
   - ‚úÖ –ë–∞–ª–∞–Ω—Å —É—Å–ø–µ—à–Ω–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä—É–µ—Ç—Å—è –∫–∞–∂–¥—ã–µ 15 —Å–µ–∫—É–Ω–¥
   - ‚úÖ –í—Å–µ –∫–æ–Ω—Ç–µ–∫—Å—Ç—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è:
     ```
     chance: 4
     tonotChance: 156
     tonot: 13320
     ton: 0
     ```

2. **WebSocket —Å–æ—Å—Ç–æ—è–Ω–∏–µ:**
   - ‚ö†Ô∏è Heartbeat —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
   - ‚úÖ –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∞–∫—Ç–∏–≤–Ω–æ –∏ —Å—Ç–∞–±–∏–ª—å–Ω–æ
   - ‚ùå –ù–µ–æ–±—Ö–æ–¥–∏–º–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ heartbeat

3. **–°–µ—Ç–µ–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã:**
   - ‚úÖ GET /api/user-data: 42 —É—Å–ø–µ—à–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–∞
   - ‚ùå POST /api/match/x10/create: TypeError
   - –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
     ```
     consoleLogs: 9
     consoleErrors: 1
     networkErrors: 1
     networkSuccess: 42
     ```

#### üêõ –û—Å–Ω–æ–≤–Ω–∞—è –ø—Ä–æ–±–ª–µ–º–∞:
```
[X10] Create Error: TypeError: (0 , o.ZP) is not a function
at y (/var/task/.next/server/app/api/match/x10/create/route.js:1:922)
```

#### üìã –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å create/route.ts:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã –∏ —ç–∫—Å–ø–æ—Ä—Ç—ã
   - –£–±–µ–¥–∏—Ç—å—Å—è –≤ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç–∏ ES6 —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö

2. **–î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É heartbeat:**
   ```typescript
   socket.on('heartbeat', (data) => {
     socket.emit('heartbeat_ack');
   });
   ```

3. **–£–ª—É—á—à–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –æ—à–∏–±–æ–∫:**
   - –î–æ–±–∞–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è
   - –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å–µ —ç—Ç–∞–ø—ã —Å–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç—á–∞
   - –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ø–µ—Ä–µ–¥ —Å–æ–∑–¥–∞–Ω–∏–µ–º

#### ‚úÖ –ü–æ—Ä—è–¥–æ–∫ –¥–µ–π—Å—Ç–≤–∏–π:
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∏–º–ø–æ—Ä—Ç—ã –≤ create/route.ts
2. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ heartbeat
3. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞
4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å—Ü–µ–Ω–∞—Ä–∏–∏ –æ—à–∏–±–æ–∫

#### üéØ –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
- –£—Å–ø–µ—à–Ω–æ–µ —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞ X10
- –°—Ç–∞–±–∏–ª—å–Ω–æ–µ WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- –ö–æ—Ä—Ä–µ–∫—Ç–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å–æ–±—ã—Ç–∏–π
- –ü–æ–Ω—è—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–± –æ—à–∏–±–∫–∞—Ö

### üìù –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–ª–∞–Ω–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π (–ü–æ–ø—ã—Ç–∫–∞ #9)

#### üîç –ö–ª—é—á–µ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã:

1. **WebSocket:**
   - ‚ùå Heartbeat —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è
   - ‚ùå –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–µ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - ‚ùå –û—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ heartbeat

2. **API –°–æ–∑–¥–∞–Ω–∏—è –º–∞—Ç—á–∞:**
   - ‚ùå TypeError –≤ create/route.js
   - ‚ùå –ü—Ä–æ–±–ª–µ–º–∞ —Å –∏–º–ø–æ—Ä—Ç–æ–º (o.ZP is not a function)
   - ‚ùå –û—à–∏–±–∫–∞ –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–µ onClick

3. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
   - ‚ö†Ô∏è –°–ª–∏—à–∫–æ–º —á–∞—Å—Ç—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
   - ‚ö†Ô∏è –î–æ—Å—Ç–∏–≥–Ω—É—Ç –ª–∏–º–∏—Ç —Å–µ—Ç–µ–≤—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ (50)

#### üìã –ü–ª–∞–Ω –¥–µ–π—Å—Ç–≤–∏–π:

1. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å WebSocket:**
   ```typescript
   // src/hooks/useSocketX10.ts
   socket.on('heartbeat', () => {
     socket.emit('heartbeat_ack');
   });
   ```

2. **–ò—Å–ø—Ä–∞–≤–∏—Ç—å create/route.ts:**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –∏–º–ø–æ—Ä—Ç—ã
   - –£–±—Ä–∞—Ç—å CommonJS —Å–∏–Ω—Ç–∞–∫—Å–∏—Å
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å ES6 –º–æ–¥—É–ª–∏

3. **–û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã:**
   - –£–≤–µ–ª–∏—á–∏—Ç—å –∏–Ω—Ç–µ—Ä–≤–∞–ª –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–∞
   - –î–æ–±–∞–≤–∏—Ç—å –¥–µ–±–∞—É–Ω—Å–∏–Ω–≥
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø—Ä–æ—Å–æ–≤

#### üîÑ –ü–æ—Ä—è–¥–æ–∫ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:
1. –°–Ω–∞—á–∞–ª–∞ WebSocket (heartbeat)
2. –ó–∞—Ç–µ–º create/route.ts
3. –í –∫–æ–Ω—Ü–µ –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–ø—Ä–æ—Å–æ–≤

### –ê–Ω–∞–ª–∏–∑ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã X10 –∏ –ø–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è (14.03.2024 07:00)

#### 1. –¢–µ–∫—É—â–∞—è —Å–∏—Ç—É–∞—Ü–∏—è:

**API Endpoints:**
- `create/route.ts` - —Å–æ–∑–¥–∞–Ω–∏–µ –º–∞—Ç—á–∞ –∏ –æ—Å–Ω–æ–≤–Ω–∞—è –ª–æ–≥–∏–∫–∞
- `game/route.ts` - –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–π API (—Å—Ç–∞—Ç—É—Å—ã, —Å–æ—Å—Ç–æ—è–Ω–∏—è)

**WebSocket:**
- –û–±—â–∏–π —Å–µ—Ä–≤–µ—Ä –¥–ª—è X2 –∏ X10
- –†–∞–∑–Ω—ã–µ –Ω–µ–π–º—Å–ø–µ–π—Å—ã –≤ —Ä–æ—É—Ç–∞—Ö —Å–æ–∫–µ—Ç–∞
- X10 –∏–º–µ–µ—Ç —Å–≤–æ–∏ —Ö–µ–Ω–¥–ª–µ—Ä—ã –∏ —Ç–∏–ø—ã (.ts –∏ .d.ts)
- –°–æ–∫–µ—Ç –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¢–û–õ–¨–ö–û –¥–ª—è –∏–≥—Ä–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞

**–ü—Ä–æ–±–ª–µ–º—ã:**
1. –ù–µ—Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–Ω–æ—Å—Ç—å –∫–æ–Ω—Å—Ç–∞–Ω—Ç:
   - X10_CONSTANTS –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —á–∞—Å—Ç–∏—á–Ω–æ
   - –ö–æ–Ω—Ñ–ª–∏–∫—Ç –º–µ–∂–¥—É X2 –∏ X10 –ø–æ–¥—Ö–æ–¥–∞–º–∏
   
2. API –∫–æ–Ω—Ñ–ª–∏–∫—Ç—ã:
   - game/route.ts –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –Ω–µ –ø–æ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
   - –î—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≤ –∑–∞–ø—Ä–æ—Å–∞—Ö
   
3. WebSocket issues:
   - –†–∞–∑–Ω—ã–µ –ø—É—Ç–∏ –¥–ª—è X2 –∏ X10 (/api/socket)
   - –ò–∑–±—ã—Ç–æ—á–Ω–∞—è –ª–æ–≥–∏–∫–∞ –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏–∑-–∑–∞ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

#### 2. –ü–ª–∞–Ω –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

**–≠—Ç–∞–ø 1: –û—á–∏—Å—Ç–∫–∞ –∫–æ–Ω—Å—Ç–∞–Ω—Ç**
- –£–¥–∞–ª–∏—Ç—å X10_CONSTANTS –∏–∑ –≤—Å–µ—Ö —Ñ–∞–π–ª–æ–≤
- –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ –ø—Ä–æ—Å—Ç—É—é –ª–æ–≥–∏–∫—É –∫–∞–∫ –≤ X2
- –û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø—ã –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

**–≠—Ç–∞–ø 2: API –†–µ—Å—Ç—Ä—É–∫—Ç—É—Ä–∏–∑–∞—Ü–∏—è**
1. create/route.ts:
   - –ï–¥–∏–Ω–∞—è —Ç–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä—ã
   - –£–ø—Ä–æ—â–µ–Ω–Ω–∞—è –≤–∞–ª–∏–¥–∞—Ü–∏—è –±–∏–ª–µ—Ç–æ–≤ (–∫–∞–∫ –≤ X2)
   - –£–±—Ä–∞—Ç—å –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

2. game/route.ts:
   - –¢–æ–ª—å–∫–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã
   - –°—Ç–∞—Ç—É—Å—ã –∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –∏–≥—Ä—ã
   - –ù–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∏–≥—Ä–æ–≤–æ–π –ª–æ–≥–∏–∫–∏

**–≠—Ç–∞–ø 3: WebSocket –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è**
1. –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–æ–∫–µ—Ç–æ–≤:
   - –¢–æ–ª—å–∫–æ –≤–æ –≤—Ä–µ–º—è –∞–∫—Ç–∏–≤–Ω–æ–π –∏–≥—Ä—ã
   - –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ –º–∞—Ç—á–∞
   - –û—Ç–∫–ª—é—á–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è

2. –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏:
   - –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ª–æ–≥–∏–∫—É –ø–µ—Ä–µ–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –æ–±—â–∏–π –ø—É—Ç—å —Å X2
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –Ω–µ–π–º—Å–ø–µ–π—Å—ã

**–≠—Ç–∞–ø 4: –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã**
1. GameRoomX10Container:
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å create/route.ts –¥–ª—è –∏–≥—Ä—ã
   - game/route.ts –¥–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏—è

2. GameControlsX10:
   - –£–ø—Ä–æ—Å—Ç–∏—Ç—å –ø—Ä–æ–≤–µ—Ä–∫–∏
   - –£–±—Ä–∞—Ç—å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å –æ—Ç –∫–æ–Ω—Å—Ç–∞–Ω—Ç
   - –£–ª—É—á—à–∏—Ç—å —Ç–∏–ø–∏–∑–∞—Ü–∏—é

#### 3. –û–∂–∏–¥–∞–µ–º—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã:
1. –ß–∏—Å—Ç–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:
   - API –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∏ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏
   - WebSocket —Ç–æ–ª—å–∫–æ –¥–ª—è –∏–≥—Ä—ã
   - –ù–µ—Ç –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è –ª–æ–≥–∏–∫–∏

2. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:
   - –ú–µ–Ω—å—à–µ –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–µ—Ä–≤–µ—Ä
   - –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–∫–µ—Ç-—Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
   - –ë—ã—Å—Ç—Ä—ã–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã

3. –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º–æ—Å—Ç—å:
   - –ü–æ–Ω—è—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
   - –õ–µ–≥–∫–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ
   - –ü—Ä–æ—Å—Ç–æ–µ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–∞

#### 4. –ü–æ—Ä—è–¥–æ–∫ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
1. –ù–∞—á–∞—Ç—å —Å –æ—á–∏—Å—Ç–∫–∏ –∫–æ–Ω—Å—Ç–∞–Ω—Ç
2. –ò—Å–ø—Ä–∞–≤–∏—Ç—å create/route.ts
3. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å game/route.ts
4. –û–±–Ω–æ–≤–∏—Ç—å —Å–æ–∫–µ—Ç—ã
5. –†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

