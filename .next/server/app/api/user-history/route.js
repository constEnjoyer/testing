"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/user-history/route";
exports.ids = ["app/api/user-history/route"];
exports.modules = {

/***/ "mongoose":
/*!***************************!*\
  !*** external "mongoose" ***!
  \***************************/
/***/ ((module) => {

module.exports = require("mongoose");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-history%2Froute&page=%2Fapi%2Fuser-history%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-history%2Froute.ts&appDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-history%2Froute&page=%2Fapi%2Fuser-history%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-history%2Froute.ts&appDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_const_Desktop_tonotchance_main_src_app_api_user_history_route_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/app/api/user-history/route.ts */ \"(rsc)/./src/app/api/user-history/route.ts\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/user-history/route\",\n        pathname: \"/api/user-history\",\n        filename: \"route\",\n        bundlePath: \"app/api/user-history/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\const\\\\Desktop\\\\tonotchance-main\\\\src\\\\app\\\\api\\\\user-history\\\\route.ts\",\n    nextConfigOutput,\n    userland: C_Users_const_Desktop_tonotchance_main_src_app_api_user_history_route_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/user-history/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZ1c2VyLWhpc3RvcnklMkZyb3V0ZSZwYWdlPSUyRmFwaSUyRnVzZXItaGlzdG9yeSUyRnJvdXRlJmFwcFBhdGhzPSZwYWdlUGF0aD1wcml2YXRlLW5leHQtYXBwLWRpciUyRmFwaSUyRnVzZXItaGlzdG9yeSUyRnJvdXRlLnRzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNjb25zdCU1Q0Rlc2t0b3AlNUN0b25vdGNoYW5jZS1tYWluJTVDc3JjJTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNjb25zdCU1Q0Rlc2t0b3AlNUN0b25vdGNoYW5jZS1tYWluJmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNrQztBQUMvRztBQUNBO0FBQ0E7QUFDQSx3QkFBd0IsZ0hBQW1CO0FBQzNDO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDtBQUNBO0FBQ0EsWUFBWTtBQUNaLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQSxRQUFRLGlFQUFpRTtBQUN6RTtBQUNBO0FBQ0EsV0FBVyw0RUFBVztBQUN0QjtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ3VIOztBQUV2SCIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10ZW1wbGF0ZS8/YzEwMyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBBcHBSb3V0ZVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvZnV0dXJlL3JvdXRlLWtpbmRcIjtcbmltcG9ydCB7IHBhdGNoRmV0Y2ggYXMgX3BhdGNoRmV0Y2ggfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvcGF0Y2gtZmV0Y2hcIjtcbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCJDOlxcXFxVc2Vyc1xcXFxjb25zdFxcXFxEZXNrdG9wXFxcXHRvbm90Y2hhbmNlLW1haW5cXFxcc3JjXFxcXGFwcFxcXFxhcGlcXFxcdXNlci1oaXN0b3J5XFxcXHJvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS91c2VyLWhpc3Rvcnkvcm91dGVcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS91c2VyLWhpc3RvcnlcIixcbiAgICAgICAgZmlsZW5hbWU6IFwicm91dGVcIixcbiAgICAgICAgYnVuZGxlUGF0aDogXCJhcHAvYXBpL3VzZXItaGlzdG9yeS9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXGNvbnN0XFxcXERlc2t0b3BcXFxcdG9ub3RjaGFuY2UtbWFpblxcXFxzcmNcXFxcYXBwXFxcXGFwaVxcXFx1c2VyLWhpc3RvcnlcXFxccm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyByZXF1ZXN0QXN5bmNTdG9yYWdlLCBzdGF0aWNHZW5lcmF0aW9uQXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcyB9ID0gcm91dGVNb2R1bGU7XG5jb25zdCBvcmlnaW5hbFBhdGhuYW1lID0gXCIvYXBpL3VzZXItaGlzdG9yeS9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-history%2Froute&page=%2Fapi%2Fuser-history%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-history%2Froute.ts&appDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./src/app/api/user-history/route.ts":
/*!*******************************************!*\
  !*** ./src/app/api/user-history/route.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/db */ \"(rsc)/./src/lib/db.js\");\n\n\nconst dynamic = \"force-dynamic\"; // Использование динамического рендеринга для API\nasync function GET(req) {\n    try {\n        console.log(\"[API user-history] Получен запрос на получение истории пользователя\");\n        // Получение параметров из URL\n        const searchParams = req.nextUrl.searchParams;\n        const userId = searchParams.get(\"userId\");\n        const page = parseInt(searchParams.get(\"page\") || \"1\", 10);\n        const limit = parseInt(searchParams.get(\"limit\") || \"10\", 10);\n        const type = searchParams.get(\"type\") || null;\n        if (!userId) {\n            console.error(\"[API user-history] Отсутствует идентификатор пользователя\");\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: false,\n                error: \"Идентификатор пользователя обязателен\"\n            }, {\n                status: 400\n            });\n        }\n        console.log(\"[API user-history] Параметры запроса:\", {\n            userId,\n            page,\n            limit,\n            type\n        });\n        // Подключение к базе данных\n        const { db, connection } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_1__.connectToDatabase)();\n        console.log(\"[API user-history] Подключение к БД установлено\");\n        // Проверяем, что ID пользователя правильно преобразован\n        const telegramId = typeof userId === \"string\" ? userId : String(userId);\n        console.log(\"[API user-history] Поиск пользователя с telegramId:\", telegramId);\n        // Поиск пользователя по различным форматам ID\n        const usersCollection = db.collection(\"users\");\n        let user = await usersCollection.findOne({\n            telegramId: telegramId\n        });\n        // Пробуем найти по числовому ID, если пользователь не найден\n        if (!user) {\n            const numericId = Number(userId);\n            if (!isNaN(numericId)) {\n                user = await usersCollection.findOne({\n                    telegramId: numericId\n                });\n                console.log(\"[API user-history] Повторная попытка поиска с числовым ID:\", numericId);\n            }\n        }\n        // Если пользователь все еще не найден, возвращаем пустую историю вместо ошибки\n        if (!user) {\n            console.warn(\"[API user-history] Пользователь не найден:\", userId);\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                success: true,\n                data: {\n                    items: [],\n                    hasMore: false,\n                    totalItems: 0,\n                    page,\n                    limit\n                }\n            });\n        }\n        console.log(\"[API user-history] Пользователь найден:\", user.telegramId);\n        // Подготовка фильтров для запроса истории\n        const filter = {\n            telegramId: user.telegramId\n        };\n        if (type) {\n            filter.type = type;\n        }\n        // Единая коллекция для всех типов истории\n        let historyItems = [];\n        let total = 0;\n        try {\n            // Проверяем, существует ли коллекция истории\n            const collections = await db.listCollections({\n                name: \"userHistory\"\n            }).toArray();\n            if (collections.length > 0) {\n                const userHistoryCollection = db.collection(\"userHistory\");\n                // Получаем общее количество записей\n                total = await userHistoryCollection.countDocuments(filter);\n                // Получаем записи с пагинацией и сортировкой по дате (сначала новые)\n                historyItems = await userHistoryCollection.find(filter).sort({\n                    date: -1\n                }).skip((page - 1) * limit).limit(limit).toArray();\n                console.log(`[API user-history] Найдено ${historyItems.length} записей истории`);\n            } else {\n                console.log(\"[API user-history] Коллекция userHistory не существует\");\n                // Создаем коллекцию для будущего использования\n                await db.createCollection(\"userHistory\");\n            }\n        } catch (historyError) {\n            console.error(\"[API user-history] Ошибка при работе с коллекцией userHistory:\", historyError);\n        // Продолжаем выполнение с пустым массивом записей\n        }\n        // Также получаем запросы на вывод как часть единой истории\n        let withdrawItems = [];\n        try {\n            // Проверяем существование коллекции withdrawRequests\n            const withdrawCollection = await db.listCollections({\n                name: \"withdrawRequests\"\n            }).toArray();\n            if (withdrawCollection.length > 0 && (!type || type === \"withdraw\")) {\n                const withdrawRequestsCollection = db.collection(\"withdrawRequests\");\n                // Фильтр для запросов на вывод\n                const withdrawFilter = {\n                    telegramId: user.telegramId\n                };\n                // Получаем запросы на вывод\n                const withdrawData = await withdrawRequestsCollection.find(withdrawFilter).sort({\n                    createdAt: -1\n                }).toArray();\n                // Преобразуем запросы на вывод в формат истории\n                withdrawItems = withdrawData.map((item)=>({\n                        id: item._id.toString(),\n                        type: \"withdraw\",\n                        date: item.createdAt,\n                        details: {\n                            amount: item.amount,\n                            walletAddress: item.walletAddress,\n                            status: item.status\n                        }\n                    }));\n                console.log(`[API user-history] Найдено ${withdrawItems.length} запросов на вывод`);\n            } else if (withdrawCollection.length === 0) {\n                console.log(\"[API user-history] Коллекция withdrawRequests не существует\");\n                // Создаем коллекцию для будущего использования\n                await db.createCollection(\"withdrawRequests\");\n            }\n        } catch (withdrawError) {\n            console.error(\"[API user-history] Ошибка при работе с коллекцией withdrawRequests:\", withdrawError);\n        }\n        // Объединяем все элементы истории и сортируем по дате\n        const allItems = [\n            ...historyItems,\n            ...withdrawItems\n        ].sort((a, b)=>new Date(b.date).getTime() - new Date(a.date).getTime()).slice((page - 1) * limit, page * limit);\n        console.log(`[API user-history] Всего возвращено ${allItems.length} записей для пользователя ${userId}`);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            data: {\n                items: allItems,\n                hasMore: page * limit < total + withdrawItems.length,\n                totalItems: total + withdrawItems.length,\n                page,\n                limit\n            }\n        });\n    } catch (error) {\n        console.error(\"[API user-history] Ошибка при обработке запроса:\", error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: false,\n            error: error.message || \"Внутренняя ошибка сервера\"\n        }, {\n            status: 500\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvYXBwL2FwaS91c2VyLWhpc3Rvcnkvcm91dGUudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7OztBQUF3RDtBQUNYO0FBRXRDLE1BQU1FLFVBQVUsZ0JBQWdCLENBQUMsaURBQWlEO0FBRWxGLGVBQWVDLElBQUlDLEdBQWdCO0lBQ3hDLElBQUk7UUFDRkMsUUFBUUMsR0FBRyxDQUFDO1FBRVosOEJBQThCO1FBQzlCLE1BQU1DLGVBQWVILElBQUlJLE9BQU8sQ0FBQ0QsWUFBWTtRQUM3QyxNQUFNRSxTQUFTRixhQUFhRyxHQUFHLENBQUM7UUFDaEMsTUFBTUMsT0FBT0MsU0FBU0wsYUFBYUcsR0FBRyxDQUFDLFdBQVcsS0FBSztRQUN2RCxNQUFNRyxRQUFRRCxTQUFTTCxhQUFhRyxHQUFHLENBQUMsWUFBWSxNQUFNO1FBQzFELE1BQU1JLE9BQU9QLGFBQWFHLEdBQUcsQ0FBQyxXQUFXO1FBRXpDLElBQUksQ0FBQ0QsUUFBUTtZQUNYSixRQUFRVSxLQUFLLENBQUM7WUFDZCxPQUFPZixxREFBWUEsQ0FBQ2dCLElBQUksQ0FBQztnQkFDdkJDLFNBQVM7Z0JBQ1RGLE9BQU87WUFDVCxHQUFHO2dCQUFFRyxRQUFRO1lBQUk7UUFDbkI7UUFFQWIsUUFBUUMsR0FBRyxDQUFDLHlDQUF5QztZQUFFRztZQUFRRTtZQUFNRTtZQUFPQztRQUFLO1FBRWpGLDRCQUE0QjtRQUM1QixNQUFNLEVBQUVLLEVBQUUsRUFBRUMsVUFBVSxFQUFFLEdBQUcsTUFBTW5CLDBEQUFpQkE7UUFDbERJLFFBQVFDLEdBQUcsQ0FBQztRQUVaLHdEQUF3RDtRQUN4RCxNQUFNZSxhQUFhLE9BQU9aLFdBQVcsV0FBV0EsU0FBU2EsT0FBT2I7UUFDaEVKLFFBQVFDLEdBQUcsQ0FBQyx1REFBdURlO1FBRW5FLDhDQUE4QztRQUM5QyxNQUFNRSxrQkFBa0JKLEdBQUdLLFVBQVUsQ0FBQztRQUN0QyxJQUFJQyxPQUFPLE1BQU1GLGdCQUFnQkcsT0FBTyxDQUFDO1lBQUVMLFlBQVlBO1FBQVc7UUFFbEUsNkRBQTZEO1FBQzdELElBQUksQ0FBQ0ksTUFBTTtZQUNULE1BQU1FLFlBQVlDLE9BQU9uQjtZQUN6QixJQUFJLENBQUNvQixNQUFNRixZQUFZO2dCQUNyQkYsT0FBTyxNQUFNRixnQkFBZ0JHLE9BQU8sQ0FBQztvQkFBRUwsWUFBWU07Z0JBQVU7Z0JBQzdEdEIsUUFBUUMsR0FBRyxDQUFDLDhEQUE4RHFCO1lBQzVFO1FBQ0Y7UUFFQSwrRUFBK0U7UUFDL0UsSUFBSSxDQUFDRixNQUFNO1lBQ1RwQixRQUFReUIsSUFBSSxDQUFDLDhDQUE4Q3JCO1lBQzNELE9BQU9ULHFEQUFZQSxDQUFDZ0IsSUFBSSxDQUFDO2dCQUN2QkMsU0FBUztnQkFDVGMsTUFBTTtvQkFDSkMsT0FBTyxFQUFFO29CQUNUQyxTQUFTO29CQUNUQyxZQUFZO29CQUNadkI7b0JBQ0FFO2dCQUNGO1lBQ0Y7UUFDRjtRQUVBUixRQUFRQyxHQUFHLENBQUMsMkNBQTJDbUIsS0FBS0osVUFBVTtRQUV0RSwwQ0FBMEM7UUFDMUMsTUFBTWMsU0FBYztZQUFFZCxZQUFZSSxLQUFLSixVQUFVO1FBQUM7UUFDbEQsSUFBSVAsTUFBTTtZQUNScUIsT0FBT3JCLElBQUksR0FBR0E7UUFDaEI7UUFFQSwwQ0FBMEM7UUFDMUMsSUFBSXNCLGVBQWUsRUFBRTtRQUNyQixJQUFJQyxRQUFRO1FBRVosSUFBSTtZQUNGLDZDQUE2QztZQUM3QyxNQUFNQyxjQUFjLE1BQU1uQixHQUFHb0IsZUFBZSxDQUFDO2dCQUFFQyxNQUFNO1lBQWMsR0FBR0MsT0FBTztZQUU3RSxJQUFJSCxZQUFZSSxNQUFNLEdBQUcsR0FBRztnQkFDMUIsTUFBTUMsd0JBQXdCeEIsR0FBR0ssVUFBVSxDQUFDO2dCQUU1QyxvQ0FBb0M7Z0JBQ3BDYSxRQUFRLE1BQU1NLHNCQUFzQkMsY0FBYyxDQUFDVDtnQkFFbkQscUVBQXFFO2dCQUNyRUMsZUFBZSxNQUFNTyxzQkFDbEJFLElBQUksQ0FBQ1YsUUFDTFcsSUFBSSxDQUFDO29CQUFFQyxNQUFNLENBQUM7Z0JBQUUsR0FDaEJDLElBQUksQ0FBQyxDQUFDckMsT0FBTyxLQUFLRSxPQUNsQkEsS0FBSyxDQUFDQSxPQUNONEIsT0FBTztnQkFFVnBDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDJCQUEyQixFQUFFOEIsYUFBYU0sTUFBTSxDQUFDLGdCQUFnQixDQUFDO1lBQ2pGLE9BQU87Z0JBQ0xyQyxRQUFRQyxHQUFHLENBQUM7Z0JBRVosK0NBQStDO2dCQUMvQyxNQUFNYSxHQUFHOEIsZ0JBQWdCLENBQUM7WUFDNUI7UUFDRixFQUFFLE9BQU9DLGNBQWM7WUFDckI3QyxRQUFRVSxLQUFLLENBQUMsa0VBQWtFbUM7UUFDaEYsa0RBQWtEO1FBQ3BEO1FBRUEsMkRBQTJEO1FBQzNELElBQUlDLGdCQUFnQixFQUFFO1FBRXRCLElBQUk7WUFDRixxREFBcUQ7WUFDckQsTUFBTUMscUJBQXFCLE1BQU1qQyxHQUFHb0IsZUFBZSxDQUFDO2dCQUFFQyxNQUFNO1lBQW1CLEdBQUdDLE9BQU87WUFFekYsSUFBSVcsbUJBQW1CVixNQUFNLEdBQUcsS0FBTSxFQUFDNUIsUUFBUUEsU0FBUyxVQUFTLEdBQUk7Z0JBQ25FLE1BQU11Qyw2QkFBNkJsQyxHQUFHSyxVQUFVLENBQUM7Z0JBRWpELCtCQUErQjtnQkFDL0IsTUFBTThCLGlCQUFpQjtvQkFBRWpDLFlBQVlJLEtBQUtKLFVBQVU7Z0JBQUM7Z0JBRXJELDRCQUE0QjtnQkFDNUIsTUFBTWtDLGVBQWUsTUFBTUYsMkJBQ3hCUixJQUFJLENBQUNTLGdCQUNMUixJQUFJLENBQUM7b0JBQUVVLFdBQVcsQ0FBQztnQkFBRSxHQUNyQmYsT0FBTztnQkFFVixnREFBZ0Q7Z0JBQ2hEVSxnQkFBZ0JJLGFBQWFFLEdBQUcsQ0FBQyxDQUFDQyxPQUFlO3dCQUMvQ0MsSUFBSUQsS0FBS0UsR0FBRyxDQUFDQyxRQUFRO3dCQUNyQi9DLE1BQU07d0JBQ05pQyxNQUFNVyxLQUFLRixTQUFTO3dCQUNwQk0sU0FBUzs0QkFDUEMsUUFBUUwsS0FBS0ssTUFBTTs0QkFDbkJDLGVBQWVOLEtBQUtNLGFBQWE7NEJBQ2pDOUMsUUFBUXdDLEtBQUt4QyxNQUFNO3dCQUNyQjtvQkFDRjtnQkFFQWIsUUFBUUMsR0FBRyxDQUFDLENBQUMsMkJBQTJCLEVBQUU2QyxjQUFjVCxNQUFNLENBQUMsa0JBQWtCLENBQUM7WUFDcEYsT0FBTyxJQUFJVSxtQkFBbUJWLE1BQU0sS0FBSyxHQUFHO2dCQUMxQ3JDLFFBQVFDLEdBQUcsQ0FBQztnQkFDWiwrQ0FBK0M7Z0JBQy9DLE1BQU1hLEdBQUc4QixnQkFBZ0IsQ0FBQztZQUM1QjtRQUNGLEVBQUUsT0FBT2dCLGVBQWU7WUFDdEI1RCxRQUFRVSxLQUFLLENBQUMsdUVBQXVFa0Q7UUFDdkY7UUFFQSxzREFBc0Q7UUFDdEQsTUFBTUMsV0FBVztlQUFJOUI7ZUFBaUJlO1NBQWMsQ0FDakRMLElBQUksQ0FBQyxDQUFDcUIsR0FBR0MsSUFBTSxJQUFJQyxLQUFLRCxFQUFFckIsSUFBSSxFQUFFdUIsT0FBTyxLQUFLLElBQUlELEtBQUtGLEVBQUVwQixJQUFJLEVBQUV1QixPQUFPLElBQ3BFQyxLQUFLLENBQUMsQ0FBQzVELE9BQU8sS0FBS0UsT0FBT0YsT0FBT0U7UUFFcENSLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLG9DQUFvQyxFQUFFNEQsU0FBU3hCLE1BQU0sQ0FBQywwQkFBMEIsRUFBRWpDLE9BQU8sQ0FBQztRQUV2RyxPQUFPVCxxREFBWUEsQ0FBQ2dCLElBQUksQ0FBQztZQUN2QkMsU0FBUztZQUNUYyxNQUFNO2dCQUNKQyxPQUFPa0M7Z0JBQ1BqQyxTQUFTLE9BQVFwQixRQUFVd0IsUUFBUWMsY0FBY1QsTUFBTTtnQkFDdkRSLFlBQVlHLFFBQVFjLGNBQWNULE1BQU07Z0JBQ3hDL0I7Z0JBQ0FFO1lBQ0Y7UUFDRjtJQUVGLEVBQUUsT0FBT0UsT0FBWTtRQUNuQlYsUUFBUVUsS0FBSyxDQUFDLG9EQUFvREE7UUFFbEUsT0FBT2YscURBQVlBLENBQUNnQixJQUFJLENBQUM7WUFDdkJDLFNBQVM7WUFDVEYsT0FBT0EsTUFBTXlELE9BQU8sSUFBSTtRQUMxQixHQUFHO1lBQUV0RCxRQUFRO1FBQUk7SUFDbkI7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10ZW1wbGF0ZS8uL3NyYy9hcHAvYXBpL3VzZXItaGlzdG9yeS9yb3V0ZS50cz81Njg1Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IE5leHRSZXF1ZXN0LCBOZXh0UmVzcG9uc2UgfSBmcm9tICduZXh0L3NlcnZlcic7XG5pbXBvcnQgeyBjb25uZWN0VG9EYXRhYmFzZSB9IGZyb20gJ0AvbGliL2RiJztcblxuZXhwb3J0IGNvbnN0IGR5bmFtaWMgPSAnZm9yY2UtZHluYW1pYyc7IC8vINCY0YHQv9C+0LvRjNC30L7QstCw0L3QuNC1INC00LjQvdCw0LzQuNGH0LXRgdC60L7Qs9C+INGA0LXQvdC00LXRgNC40L3Qs9CwINC00LvRjyBBUElcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIEdFVChyZXE6IE5leHRSZXF1ZXN0KSB7XG4gIHRyeSB7XG4gICAgY29uc29sZS5sb2coJ1tBUEkgdXNlci1oaXN0b3J5XSDQn9C+0LvRg9GH0LXQvSDQt9Cw0L/RgNC+0YEg0L3QsCDQv9C+0LvRg9GH0LXQvdC40LUg0LjRgdGC0L7RgNC40Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPJyk7XG4gICAgXG4gICAgLy8g0J/QvtC70YPRh9C10L3QuNC1INC/0LDRgNCw0LzQtdGC0YDQvtCyINC40LcgVVJMXG4gICAgY29uc3Qgc2VhcmNoUGFyYW1zID0gcmVxLm5leHRVcmwuc2VhcmNoUGFyYW1zO1xuICAgIGNvbnN0IHVzZXJJZCA9IHNlYXJjaFBhcmFtcy5nZXQoJ3VzZXJJZCcpO1xuICAgIGNvbnN0IHBhZ2UgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdwYWdlJykgfHwgJzEnLCAxMCk7XG4gICAgY29uc3QgbGltaXQgPSBwYXJzZUludChzZWFyY2hQYXJhbXMuZ2V0KCdsaW1pdCcpIHx8ICcxMCcsIDEwKTtcbiAgICBjb25zdCB0eXBlID0gc2VhcmNoUGFyYW1zLmdldCgndHlwZScpIHx8IG51bGw7XG4gICAgXG4gICAgaWYgKCF1c2VySWQpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBUEkgdXNlci1oaXN0b3J5XSDQntGC0YHRg9GC0YHRgtCy0YPQtdGCINC40LTQtdC90YLQuNGE0LjQutCw0YLQvtGAINC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjycpO1xuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICAgIHN1Y2Nlc3M6IGZhbHNlLCBcbiAgICAgICAgZXJyb3I6ICfQmNC00LXQvdGC0LjRhNC40LrQsNGC0L7RgCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L7QsdGP0LfQsNGC0LXQu9C10L0nIFxuICAgICAgfSwgeyBzdGF0dXM6IDQwMCB9KTtcbiAgICB9XG4gICAgXG4gICAgY29uc29sZS5sb2coJ1tBUEkgdXNlci1oaXN0b3J5XSDQn9Cw0YDQsNC80LXRgtGA0Ysg0LfQsNC/0YDQvtGB0LA6JywgeyB1c2VySWQsIHBhZ2UsIGxpbWl0LCB0eXBlIH0pO1xuICAgIFxuICAgIC8vINCf0L7QtNC60LvRjtGH0LXQvdC40LUg0Log0LHQsNC30LUg0LTQsNC90L3Ri9GFXG4gICAgY29uc3QgeyBkYiwgY29ubmVjdGlvbiB9ID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcbiAgICBjb25zb2xlLmxvZygnW0FQSSB1c2VyLWhpc3RvcnldINCf0L7QtNC60LvRjtGH0LXQvdC40LUg0Log0JHQlCDRg9GB0YLQsNC90L7QstC70LXQvdC+Jyk7XG4gICAgXG4gICAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8LCDRh9GC0L4gSUQg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC/0YDQsNCy0LjQu9GM0L3QviDQv9GA0LXQvtCx0YDQsNC30L7QstCw0L1cbiAgICBjb25zdCB0ZWxlZ3JhbUlkID0gdHlwZW9mIHVzZXJJZCA9PT0gJ3N0cmluZycgPyB1c2VySWQgOiBTdHJpbmcodXNlcklkKTtcbiAgICBjb25zb2xlLmxvZygnW0FQSSB1c2VyLWhpc3RvcnldINCf0L7QuNGB0Log0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINGBIHRlbGVncmFtSWQ6JywgdGVsZWdyYW1JZCk7XG4gICAgXG4gICAgLy8g0J/QvtC40YHQuiDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0L/QviDRgNCw0LfQu9C40YfQvdGL0Lwg0YTQvtGA0LzQsNGC0LDQvCBJRFxuICAgIGNvbnN0IHVzZXJzQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJzJyk7XG4gICAgbGV0IHVzZXIgPSBhd2FpdCB1c2Vyc0NvbGxlY3Rpb24uZmluZE9uZSh7IHRlbGVncmFtSWQ6IHRlbGVncmFtSWQgfSk7XG4gICAgXG4gICAgLy8g0J/RgNC+0LHRg9C10Lwg0L3QsNC50YLQuCDQv9C+INGH0LjRgdC70L7QstC+0LzRgyBJRCwg0LXRgdC70Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC90LUg0L3QsNC50LTQtdC9XG4gICAgaWYgKCF1c2VyKSB7XG4gICAgICBjb25zdCBudW1lcmljSWQgPSBOdW1iZXIodXNlcklkKTtcbiAgICAgIGlmICghaXNOYU4obnVtZXJpY0lkKSkge1xuICAgICAgICB1c2VyID0gYXdhaXQgdXNlcnNDb2xsZWN0aW9uLmZpbmRPbmUoeyB0ZWxlZ3JhbUlkOiBudW1lcmljSWQgfSk7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBJIHVzZXItaGlzdG9yeV0g0J/QvtCy0YLQvtGA0L3QsNGPINC/0L7Qv9GL0YLQutCwINC/0L7QuNGB0LrQsCDRgSDRh9C40YHQu9C+0LLRi9C8IElEOicsIG51bWVyaWNJZCk7XG4gICAgICB9XG4gICAgfVxuICAgIFxuICAgIC8vINCV0YHQu9C4INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQstGB0LUg0LXRidC1INC90LUg0L3QsNC50LTQtdC9LCDQstC+0LfQstGA0LDRidCw0LXQvCDQv9GD0YHRgtGD0Y4g0LjRgdGC0L7RgNC40Y4g0LLQvNC10YHRgtC+INC+0YjQuNCx0LrQuFxuICAgIGlmICghdXNlcikge1xuICAgICAgY29uc29sZS53YXJuKCdbQVBJIHVzZXItaGlzdG9yeV0g0J/QvtC70YzQt9C+0LLQsNGC0LXQu9GMINC90LUg0L3QsNC50LTQtdC9OicsIHVzZXJJZCk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBcbiAgICAgICAgc3VjY2VzczogdHJ1ZSwgXG4gICAgICAgIGRhdGE6IHtcbiAgICAgICAgICBpdGVtczogW10sXG4gICAgICAgICAgaGFzTW9yZTogZmFsc2UsXG4gICAgICAgICAgdG90YWxJdGVtczogMCxcbiAgICAgICAgICBwYWdlLFxuICAgICAgICAgIGxpbWl0XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cbiAgICBcbiAgICBjb25zb2xlLmxvZygnW0FQSSB1c2VyLWhpc3RvcnldINCf0L7Qu9GM0LfQvtCy0LDRgtC10LvRjCDQvdCw0LnQtNC10L06JywgdXNlci50ZWxlZ3JhbUlkKTtcbiAgICBcbiAgICAvLyDQn9C+0LTQs9C+0YLQvtCy0LrQsCDRhNC40LvRjNGC0YDQvtCyINC00LvRjyDQt9Cw0L/RgNC+0YHQsCDQuNGB0YLQvtGA0LjQuFxuICAgIGNvbnN0IGZpbHRlcjogYW55ID0geyB0ZWxlZ3JhbUlkOiB1c2VyLnRlbGVncmFtSWQgfTtcbiAgICBpZiAodHlwZSkge1xuICAgICAgZmlsdGVyLnR5cGUgPSB0eXBlO1xuICAgIH1cbiAgICBcbiAgICAvLyDQldC00LjQvdCw0Y8g0LrQvtC70LvQtdC60YbQuNGPINC00LvRjyDQstGB0LXRhSDRgtC40L/QvtCyINC40YHRgtC+0YDQuNC4XG4gICAgbGV0IGhpc3RvcnlJdGVtcyA9IFtdO1xuICAgIGxldCB0b3RhbCA9IDA7XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCwg0YHRg9GJ0LXRgdGC0LLRg9C10YIg0LvQuCDQutC+0LvQu9C10LrRhtC40Y8g0LjRgdGC0L7RgNC40LhcbiAgICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZGIubGlzdENvbGxlY3Rpb25zKHsgbmFtZTogJ3VzZXJIaXN0b3J5JyB9KS50b0FycmF5KCk7XG4gICAgICBcbiAgICAgIGlmIChjb2xsZWN0aW9ucy5sZW5ndGggPiAwKSB7XG4gICAgICAgIGNvbnN0IHVzZXJIaXN0b3J5Q29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3VzZXJIaXN0b3J5Jyk7XG4gICAgICAgIFxuICAgICAgICAvLyDQn9C+0LvRg9GH0LDQtdC8INC+0LHRidC10LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0LfQsNC/0LjRgdC10LlcbiAgICAgICAgdG90YWwgPSBhd2FpdCB1c2VySGlzdG9yeUNvbGxlY3Rpb24uY291bnREb2N1bWVudHMoZmlsdGVyKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCf0L7Qu9GD0YfQsNC10Lwg0LfQsNC/0LjRgdC4INGBINC/0LDQs9C40L3QsNGG0LjQtdC5INC4INGB0L7RgNGC0LjRgNC+0LLQutC+0Lkg0L/QviDQtNCw0YLQtSAo0YHQvdCw0YfQsNC70LAg0L3QvtCy0YvQtSlcbiAgICAgICAgaGlzdG9yeUl0ZW1zID0gYXdhaXQgdXNlckhpc3RvcnlDb2xsZWN0aW9uXG4gICAgICAgICAgLmZpbmQoZmlsdGVyKVxuICAgICAgICAgIC5zb3J0KHsgZGF0ZTogLTEgfSlcbiAgICAgICAgICAuc2tpcCgocGFnZSAtIDEpICogbGltaXQpXG4gICAgICAgICAgLmxpbWl0KGxpbWl0KVxuICAgICAgICAgIC50b0FycmF5KCk7XG4gICAgICAgIFxuICAgICAgICBjb25zb2xlLmxvZyhgW0FQSSB1c2VyLWhpc3RvcnldINCd0LDQudC00LXQvdC+ICR7aGlzdG9yeUl0ZW1zLmxlbmd0aH0g0LfQsNC/0LjRgdC10Lkg0LjRgdGC0L7RgNC40LhgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBJIHVzZXItaGlzdG9yeV0g0JrQvtC70LvQtdC60YbQuNGPIHVzZXJIaXN0b3J5INC90LUg0YHRg9GJ0LXRgdGC0LLRg9C10YInKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCh0L7Qt9C00LDQtdC8INC60L7Qu9C70LXQutGG0LjRjiDQtNC70Y8g0LHRg9C00YPRidC10LPQviDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjRj1xuICAgICAgICBhd2FpdCBkYi5jcmVhdGVDb2xsZWN0aW9uKCd1c2VySGlzdG9yeScpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGhpc3RvcnlFcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0FQSSB1c2VyLWhpc3RvcnldINCe0YjQuNCx0LrQsCDQv9GA0Lgg0YDQsNCx0L7RgtC1INGBINC60L7Qu9C70LXQutGG0LjQtdC5IHVzZXJIaXN0b3J5OicsIGhpc3RvcnlFcnJvcik7XG4gICAgICAvLyDQn9GA0L7QtNC+0LvQttCw0LXQvCDQstGL0L/QvtC70L3QtdC90LjQtSDRgSDQv9GD0YHRgtGL0Lwg0LzQsNGB0YHQuNCy0L7QvCDQt9Cw0L/QuNGB0LXQuVxuICAgIH1cbiAgICBcbiAgICAvLyDQotCw0LrQttC1INC/0L7Qu9GD0YfQsNC10Lwg0LfQsNC/0YDQvtGB0Ysg0L3QsCDQstGL0LLQvtC0INC60LDQuiDRh9Cw0YHRgtGMINC10LTQuNC90L7QuSDQuNGB0YLQvtGA0LjQuFxuICAgIGxldCB3aXRoZHJhd0l0ZW1zID0gW107XG4gICAgXG4gICAgdHJ5IHtcbiAgICAgIC8vINCf0YDQvtCy0LXRgNGP0LXQvCDRgdGD0YnQtdGB0YLQstC+0LLQsNC90LjQtSDQutC+0LvQu9C10LrRhtC40Lggd2l0aGRyYXdSZXF1ZXN0c1xuICAgICAgY29uc3Qgd2l0aGRyYXdDb2xsZWN0aW9uID0gYXdhaXQgZGIubGlzdENvbGxlY3Rpb25zKHsgbmFtZTogJ3dpdGhkcmF3UmVxdWVzdHMnIH0pLnRvQXJyYXkoKTtcbiAgICAgIFxuICAgICAgaWYgKHdpdGhkcmF3Q29sbGVjdGlvbi5sZW5ndGggPiAwICYmICghdHlwZSB8fCB0eXBlID09PSAnd2l0aGRyYXcnKSkge1xuICAgICAgICBjb25zdCB3aXRoZHJhd1JlcXVlc3RzQ29sbGVjdGlvbiA9IGRiLmNvbGxlY3Rpb24oJ3dpdGhkcmF3UmVxdWVzdHMnKTtcbiAgICAgICAgXG4gICAgICAgIC8vINCk0LjQu9GM0YLRgCDQtNC70Y8g0LfQsNC/0YDQvtGB0L7QsiDQvdCwINCy0YvQstC+0LRcbiAgICAgICAgY29uc3Qgd2l0aGRyYXdGaWx0ZXIgPSB7IHRlbGVncmFtSWQ6IHVzZXIudGVsZWdyYW1JZCB9O1xuICAgICAgICBcbiAgICAgICAgLy8g0J/QvtC70YPRh9Cw0LXQvCDQt9Cw0L/RgNC+0YHRiyDQvdCwINCy0YvQstC+0LRcbiAgICAgICAgY29uc3Qgd2l0aGRyYXdEYXRhID0gYXdhaXQgd2l0aGRyYXdSZXF1ZXN0c0NvbGxlY3Rpb25cbiAgICAgICAgICAuZmluZCh3aXRoZHJhd0ZpbHRlcilcbiAgICAgICAgICAuc29ydCh7IGNyZWF0ZWRBdDogLTEgfSlcbiAgICAgICAgICAudG9BcnJheSgpO1xuICAgICAgICBcbiAgICAgICAgLy8g0J/RgNC10L7QsdGA0LDQt9GD0LXQvCDQt9Cw0L/RgNC+0YHRiyDQvdCwINCy0YvQstC+0LQg0LIg0YTQvtGA0LzQsNGCINC40YHRgtC+0YDQuNC4XG4gICAgICAgIHdpdGhkcmF3SXRlbXMgPSB3aXRoZHJhd0RhdGEubWFwKChpdGVtOiBhbnkpID0+ICh7XG4gICAgICAgICAgaWQ6IGl0ZW0uX2lkLnRvU3RyaW5nKCksXG4gICAgICAgICAgdHlwZTogJ3dpdGhkcmF3JyxcbiAgICAgICAgICBkYXRlOiBpdGVtLmNyZWF0ZWRBdCxcbiAgICAgICAgICBkZXRhaWxzOiB7XG4gICAgICAgICAgICBhbW91bnQ6IGl0ZW0uYW1vdW50LFxuICAgICAgICAgICAgd2FsbGV0QWRkcmVzczogaXRlbS53YWxsZXRBZGRyZXNzLFxuICAgICAgICAgICAgc3RhdHVzOiBpdGVtLnN0YXR1c1xuICAgICAgICAgIH1cbiAgICAgICAgfSkpO1xuICAgICAgICBcbiAgICAgICAgY29uc29sZS5sb2coYFtBUEkgdXNlci1oaXN0b3J5XSDQndCw0LnQtNC10L3QviAke3dpdGhkcmF3SXRlbXMubGVuZ3RofSDQt9Cw0L/RgNC+0YHQvtCyINC90LAg0LLRi9Cy0L7QtGApO1xuICAgICAgfSBlbHNlIGlmICh3aXRoZHJhd0NvbGxlY3Rpb24ubGVuZ3RoID09PSAwKSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCdbQVBJIHVzZXItaGlzdG9yeV0g0JrQvtC70LvQtdC60YbQuNGPIHdpdGhkcmF3UmVxdWVzdHMg0L3QtSDRgdGD0YnQtdGB0YLQstGD0LXRgicpO1xuICAgICAgICAvLyDQodC+0LfQtNCw0LXQvCDQutC+0LvQu9C10LrRhtC40Y4g0LTQu9GPINCx0YPQtNGD0YnQtdCz0L4g0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y9cbiAgICAgICAgYXdhaXQgZGIuY3JlYXRlQ29sbGVjdGlvbignd2l0aGRyYXdSZXF1ZXN0cycpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKHdpdGhkcmF3RXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ1tBUEkgdXNlci1oaXN0b3J5XSDQntGI0LjQsdC60LAg0L/RgNC4INGA0LDQsdC+0YLQtSDRgSDQutC+0LvQu9C10LrRhtC40LXQuSB3aXRoZHJhd1JlcXVlc3RzOicsIHdpdGhkcmF3RXJyb3IpO1xuICAgIH1cbiAgICBcbiAgICAvLyDQntCx0YrQtdC00LjQvdGP0LXQvCDQstGB0LUg0Y3Qu9C10LzQtdC90YLRiyDQuNGB0YLQvtGA0LjQuCDQuCDRgdC+0YDRgtC40YDRg9C10Lwg0L/QviDQtNCw0YLQtVxuICAgIGNvbnN0IGFsbEl0ZW1zID0gWy4uLmhpc3RvcnlJdGVtcywgLi4ud2l0aGRyYXdJdGVtc11cbiAgICAgIC5zb3J0KChhLCBiKSA9PiBuZXcgRGF0ZShiLmRhdGUpLmdldFRpbWUoKSAtIG5ldyBEYXRlKGEuZGF0ZSkuZ2V0VGltZSgpKVxuICAgICAgLnNsaWNlKChwYWdlIC0gMSkgKiBsaW1pdCwgcGFnZSAqIGxpbWl0KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZyhgW0FQSSB1c2VyLWhpc3RvcnldINCS0YHQtdCz0L4g0LLQvtC30LLRgNCw0YnQtdC90L4gJHthbGxJdGVtcy5sZW5ndGh9INC30LDQv9C40YHQtdC5INC00LvRjyDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8gJHt1c2VySWR9YCk7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIGRhdGE6IHtcbiAgICAgICAgaXRlbXM6IGFsbEl0ZW1zLFxuICAgICAgICBoYXNNb3JlOiAocGFnZSAqIGxpbWl0KSA8ICh0b3RhbCArIHdpdGhkcmF3SXRlbXMubGVuZ3RoKSxcbiAgICAgICAgdG90YWxJdGVtczogdG90YWwgKyB3aXRoZHJhd0l0ZW1zLmxlbmd0aCxcbiAgICAgICAgcGFnZSxcbiAgICAgICAgbGltaXRcbiAgICAgIH1cbiAgICB9KTtcbiAgICBcbiAgfSBjYXRjaCAoZXJyb3I6IGFueSkge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tBUEkgdXNlci1oaXN0b3J5XSDQntGI0LjQsdC60LAg0L/RgNC4INC+0LHRgNCw0LHQvtGC0LrQtSDQt9Cw0L/RgNC+0YHQsDonLCBlcnJvcik7XG4gICAgXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiBmYWxzZSwgXG4gICAgICBlcnJvcjogZXJyb3IubWVzc2FnZSB8fCAn0JLQvdGD0YLRgNC10L3QvdGP0Y8g0L7RiNC40LHQutCwINGB0LXRgNCy0LXRgNCwJyBcbiAgICB9LCB7IHN0YXR1czogNTAwIH0pO1xuICB9XG59ICJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJjb25uZWN0VG9EYXRhYmFzZSIsImR5bmFtaWMiLCJHRVQiLCJyZXEiLCJjb25zb2xlIiwibG9nIiwic2VhcmNoUGFyYW1zIiwibmV4dFVybCIsInVzZXJJZCIsImdldCIsInBhZ2UiLCJwYXJzZUludCIsImxpbWl0IiwidHlwZSIsImVycm9yIiwianNvbiIsInN1Y2Nlc3MiLCJzdGF0dXMiLCJkYiIsImNvbm5lY3Rpb24iLCJ0ZWxlZ3JhbUlkIiwiU3RyaW5nIiwidXNlcnNDb2xsZWN0aW9uIiwiY29sbGVjdGlvbiIsInVzZXIiLCJmaW5kT25lIiwibnVtZXJpY0lkIiwiTnVtYmVyIiwiaXNOYU4iLCJ3YXJuIiwiZGF0YSIsIml0ZW1zIiwiaGFzTW9yZSIsInRvdGFsSXRlbXMiLCJmaWx0ZXIiLCJoaXN0b3J5SXRlbXMiLCJ0b3RhbCIsImNvbGxlY3Rpb25zIiwibGlzdENvbGxlY3Rpb25zIiwibmFtZSIsInRvQXJyYXkiLCJsZW5ndGgiLCJ1c2VySGlzdG9yeUNvbGxlY3Rpb24iLCJjb3VudERvY3VtZW50cyIsImZpbmQiLCJzb3J0IiwiZGF0ZSIsInNraXAiLCJjcmVhdGVDb2xsZWN0aW9uIiwiaGlzdG9yeUVycm9yIiwid2l0aGRyYXdJdGVtcyIsIndpdGhkcmF3Q29sbGVjdGlvbiIsIndpdGhkcmF3UmVxdWVzdHNDb2xsZWN0aW9uIiwid2l0aGRyYXdGaWx0ZXIiLCJ3aXRoZHJhd0RhdGEiLCJjcmVhdGVkQXQiLCJtYXAiLCJpdGVtIiwiaWQiLCJfaWQiLCJ0b1N0cmluZyIsImRldGFpbHMiLCJhbW91bnQiLCJ3YWxsZXRBZGRyZXNzIiwid2l0aGRyYXdFcnJvciIsImFsbEl0ZW1zIiwiYSIsImIiLCJEYXRlIiwiZ2V0VGltZSIsInNsaWNlIiwibWVzc2FnZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/app/api/user-history/route.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/config.ts":
/*!***************************!*\
  !*** ./src/lib/config.ts ***!
  \***************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   APP_CONFIG: () => (/* binding */ APP_CONFIG),\n/* harmony export */   CONFIG: () => (/* binding */ CONFIG),\n/* harmony export */   IS_DEV_MODE: () => (/* binding */ IS_DEV_MODE),\n/* harmony export */   MATCH_TIMEOUT: () => (/* binding */ MATCH_TIMEOUT),\n/* harmony export */   MAX_PLAYERS: () => (/* binding */ MAX_PLAYERS),\n/* harmony export */   MIN_PLAYERS: () => (/* binding */ MIN_PLAYERS),\n/* harmony export */   QUEUE_TIMEOUT: () => (/* binding */ QUEUE_TIMEOUT),\n/* harmony export */   SOCKET_CONFIG: () => (/* binding */ SOCKET_CONFIG),\n/* harmony export */   SOCKET_URL: () => (/* binding */ SOCKET_URL),\n/* harmony export */   TON_CONFIG: () => (/* binding */ TON_CONFIG),\n/* harmony export */   X10_CONFIG: () => (/* binding */ X10_CONFIG),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n// Объявление типов для переменных окружения\n/**\n * Конфигурация приложения\n */ const CONFIG = {\n    // Адрес кошелька для приема платежей\n    WALLET_ADDRESS: process.env.NEXT_PUBLIC_WALLET_ADDRESS,\n    // Адрес кошелька разработчика для отправки TON\n    DEVELOPER_ADDRESS: \"UQBDpsvrVFPp5P5gLXJKGNl42BVq5zzqfJYJXQuufQwhxBf7\",\n    // Настройки сети TON\n    NETWORK: process.env.NEXT_PUBLIC_NETWORK || \"mainnet\",\n    // API ключ TON\n    TON_API_KEY: \"cacf6f5bd0603089739e73cb7619d972c34743f0e718b59d4cea17c4dfb9db95\",\n    // URL-адреса для приложения\n    APP_URL: \"https://oldfrager.xyz\",\n    API_URL: \"https://oldfrager.xyz/api\",\n    // Настройки MongoDB\n    MONGODB_URI: process.env.MONGODB_URI,\n    // Цена за 1 билет в TON\n    TICKET_PRICE: Number(process.env.NEXT_PUBLIC_TICKET_PRICE) || 0.000000001,\n    // Комиссия платформы в процентах\n    PLATFORM_FEE: Number(process.env.NEXT_PUBLIC_PLATFORM_FEE) || 5,\n    // Параметры для хранения данных в localStorage\n    STORAGE_KEYS: {\n        AUTH: \"tonot_auth\",\n        USER: \"tonot_user\",\n        THEME: \"tonot_theme\",\n        LANG: \"tonot_lang\",\n        TELEGRAM_USER: \"telegram_user\",\n        ACCESS_TOKEN: \"access_token\",\n        TICKETS: \"tickets\",\n        TONOT_CHANCE_TICKETS: \"tonotChanceTickets\",\n        X10_GAME_STATE: \"x10_game_state\"\n    },\n    // Максимальное количество попыток подключения к базе данных\n    MAX_DB_CONNECT_RETRIES: 5,\n    // Задержка между попытками подключения к базе данных (в миллисекундах)\n    DB_RETRY_DELAY: 2000,\n    // API эндпоинты\n    API_ENDPOINTS: {\n        // Основные эндпоинты\n        USER_DATA: \"/api/user-data\",\n        TELEGRAM_USER: \"/api/telegram-user\",\n        TICKETS: \"/api/tickets/purchase\",\n        // X2 эндпоинты (классическая игра)\n        X2: {\n            GAME: \"/api/match/game\",\n            CREATE: \"/api/match/create\",\n            CANCEL: \"/api/match/cancel\",\n            COMPLETE: \"/api/match/complete\" // Завершение матча\n        },\n        // X10 эндпоинты (мультиплеер)\n        X10: {\n            GAME: \"/api/match/x10/game\",\n            CREATE: \"/api/match/x10/create\",\n            CANCEL: \"/api/match/x10/cancel\",\n            COMPLETE: \"/api/match/x10/complete\" // Завершение матча\n        }\n    }\n};\n/**\n * URL для WebSocket соединения\n */ const SOCKET_URL = process.env.NEXT_PUBLIC_SOCKET_URL;\n/**\n * Конфигурация для Socket.IO сервера\n */ const SOCKET_CONFIG = {\n    // CORS настройки\n    cors: {\n        origin: process.env.SOCKET_CORS_ORIGIN || \"*\",\n        methods: [\n            \"GET\",\n            \"POST\"\n        ],\n        credentials: true\n    },\n    // Настройки пинга и таймаутов\n    pingTimeout: 30000,\n    pingInterval: 15000,\n    connectTimeout: 10000,\n    // Настройки переподключения\n    reconnection: true,\n    reconnectionAttempts: 3,\n    reconnectionDelay: 2000,\n    // Настройки для игры\n    waitingTimeout: 120000,\n    matchTimeout: 300000,\n    countdownTime: 5 // время обратного отсчета в секундах\n};\n/**\n * Конфигурация для режима X10\n */ const X10_CONFIG = {\n    // Основные настройки\n    MIN_PLAYERS: 10,\n    MAX_PLAYERS: 10,\n    WINNERS_COUNT: 3,\n    // Для обратной совместимости\n    PLAYERS: {\n        MIN: 10,\n        MAX: 10\n    },\n    // Настройки призов (в процентах от общего пула)\n    PRIZE_DISTRIBUTION: {\n        FIRST_PLACE: 50,\n        SECOND_PLACE: 30,\n        THIRD_PLACE: 20 // 20% пула для третьего места\n    },\n    // Таймауты\n    QUEUE_TIMEOUT: 600000,\n    MATCH_TIMEOUT: 300000,\n    COUNTDOWN_TIME: 10,\n    // Настройки переподключения\n    MAX_RECONNECT_ATTEMPTS: 3,\n    RECONNECT_DELAY: 2000,\n    // Настройки билетов\n    TICKETS: {\n        // Активные билеты для игры (сгорают при использовании)\n        GAME: {\n            COST: 1,\n            FIELD_NAME: \"chance\" // Название поля в API и базе данных\n        },\n        // Пассивные билеты TONOT CHANCE (начисляются за проигрыш)\n        TONOT_CHANCE: {\n            REWARD: 1,\n            FIELD_NAME: \"tonotChanceTickets\" // Название поля в API и базе данных\n        }\n    },\n    // Настройки матча\n    MATCH: {\n        MIN_PLAYERS: 10,\n        MAX_PLAYERS: 10,\n        TIMEOUT: 300000,\n        QUEUE_TIMEOUT: 600000 // 10 минут\n    },\n    // Настройки призов\n    PRIZES: {\n        FIRST: 450,\n        SECOND: 270,\n        THIRD: 180,\n        CONSOLATION_TICKET: 1 // Утешительный билет для проигравших\n    },\n    // Тайминги анимаций\n    GAME_TIMINGS: {\n        PREPARING: 5000,\n        MERGING: 7500,\n        WHEEL_APPEAR: 4000,\n        WHEEL_SPIN: 7000,\n        WHEEL_STOP: 2000,\n        RESULT: 1000 // 1 секунда\n    }\n};\n// Экспортируем также отдельные константы для обратной совместимости\nconst MAX_PLAYERS = X10_CONFIG.MAX_PLAYERS;\nconst MIN_PLAYERS = X10_CONFIG.MIN_PLAYERS;\nconst MATCH_TIMEOUT = X10_CONFIG.MATCH_TIMEOUT;\nconst QUEUE_TIMEOUT = X10_CONFIG.QUEUE_TIMEOUT;\n/**\n * Конфигурация для работы с TON\n */ const TON_CONFIG = {\n    // Адрес TON кошелька приложения\n    WALLET_ADDRESS: process.env.NEXT_PUBLIC_WALLET_ADDRESS || CONFIG.WALLET_ADDRESS,\n    // Адрес кошелька разработчика\n    DEVELOPER_ADDRESS: \"UQBDpsvrVFPp5P5gLXJKGNl42BVq5zzqfJYJXQuufQwhxBf7\" || 0,\n    // API ключ для TON\n    API_KEY: \"cacf6f5bd0603089739e73cb7619d972c34743f0e718b59d4cea17c4dfb9db95\" || 0\n};\n// Другие настройки приложения\nconst APP_CONFIG = {\n    buildTimeDBConnection: \"true\" !== \"true\"\n};\n// Добавляем конфигурацию для режима симуляции\nconst IS_DEV_MODE = \"development\" === \"development\";\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (CONFIG);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNsQkcsT0FBTztRQUNMbkIsYUFBYTtRQUNiQyxhQUFhO1FBQ2JtQixTQUFTO1FBQ1RWLGVBQWUsT0FBTyxXQUFXO0lBQ25DO0lBRUEsbUJBQW1CO0lBQ25CVyxRQUFRO1FBQ05DLE9BQU87UUFDUEMsUUFBUTtRQUNSQyxPQUFPO1FBQ1BDLG9CQUFvQixFQUFHLHFDQUFxQztJQUM5RDtJQUVBLG9CQUFvQjtJQUNwQkMsY0FBYztRQUNaQyxXQUFXO1FBQ1hDLFNBQVM7UUFDVEMsY0FBYztRQUNkQyxZQUFZO1FBQ1pDLFlBQVk7UUFDWkMsUUFBUSxLQUFZLFlBQVk7SUFDbEM7QUFDRixFQUFXO0FBRVgsb0VBQW9FO0FBQzdELE1BQU0vQixjQUFjRixXQUFXRSxXQUFXLENBQUM7QUFDM0MsTUFBTUQsY0FBY0QsV0FBV0MsV0FBVyxDQUFDO0FBQzNDLE1BQU1XLGdCQUFnQlosV0FBV1ksYUFBYSxDQUFDO0FBQy9DLE1BQU1ELGdCQUFnQlgsV0FBV1csYUFBYSxDQUFDO0FBRXREOztDQUVDLEdBQ00sTUFBTXVCLGFBQWE7SUFDeEIsZ0NBQWdDO0lBQ2hDM0YsZ0JBQWdCQyxRQUFRQyxHQUFHLENBQUNDLDBCQUEwQixJQUFJSixPQUFPQyxjQUFjO0lBRS9FLDhCQUE4QjtJQUM5QkksbUJBQW1CSCxrREFBeUMsSUFBSUYsQ0FBd0I7SUFFeEYsbUJBQW1CO0lBQ25CNkYsU0FBUzNGLGtFQUFtQyxJQUFJRixDQUFrQjtBQUNwRSxFQUFFO0FBRUYsOEJBQThCO0FBQ3ZCLE1BQU04RixhQUFhO0lBQ3hCQyx1QkFBdUI3RixNQUEyQyxLQUFLO0FBQ3pFLEVBQUU7QUFFRiw4Q0FBOEM7QUFDdkMsTUFBTStGLGNBQWMvRixrQkFBeUIsY0FBYztBQUVsRSxpRUFBZUYsTUFBTUEsRUFBQyIsInNvdXJjZXMiOlsid2VicGFjazovL25leHRqcy10ZW1wbGF0ZS8uL3NyYy9saWIvY29uZmlnLnRzP2EzZWYiXSwic291cmNlc0NvbnRlbnQiOlsiLy8g0J7QsdGK0Y/QstC70LXQvdC40LUg0YLQuNC/0L7QsiDQtNC70Y8g0L/QtdGA0LXQvNC10L3QvdGL0YUg0L7QutGA0YPQttC10L3QuNGPXG5kZWNsYXJlIGdsb2JhbCB7XG4gIG5hbWVzcGFjZSBOb2RlSlMge1xuICAgIGludGVyZmFjZSBQcm9jZXNzRW52IHtcbiAgICAgIE5FWFRfUFVCTElDX1dBTExFVF9BRERSRVNTOiBzdHJpbmc7XG4gICAgICBORVhUX1BVQkxJQ19ERVZFTE9QRVJfQUREUkVTUzogc3RyaW5nO1xuICAgICAgTkVYVF9QVUJMSUNfVE9OX0FQSV9LRVk6IHN0cmluZztcbiAgICAgIE5FWFRfUFVCTElDX0FQUF9VUkw6IHN0cmluZztcbiAgICAgIE5FWFRfUFVCTElDX0FQSV9VUkw6IHN0cmluZztcbiAgICAgIE1PTkdPREJfVVJJOiBzdHJpbmc7XG4gICAgICBORVhUX1BVQkxJQ19TT0NLRVRfVVJMOiBzdHJpbmc7XG4gICAgICBTT0NLRVRfQ09SU19PUklHSU46IHN0cmluZztcbiAgICAgIE5FWFRfUFVCTElDX05FVFdPUks6IHN0cmluZztcbiAgICAgIE5FWFRfUFVCTElDX1RJQ0tFVF9QUklDRTogc3RyaW5nO1xuICAgICAgTkVYVF9QVUJMSUNfUExBVEZPUk1fRkVFOiBzdHJpbmc7XG4gICAgfVxuICB9XG59XG5cbi8qKlxuICog0JrQvtC90YTQuNCz0YPRgNCw0YbQuNGPINC/0YDQuNC70L7QttC10L3QuNGPXG4gKi9cbmV4cG9ydCBjb25zdCBDT05GSUcgPSB7XG4gIC8vINCQ0LTRgNC10YEg0LrQvtGI0LXQu9GM0LrQsCDQtNC70Y8g0L/RgNC40LXQvNCwINC/0LvQsNGC0LXQttC10LlcbiAgV0FMTEVUX0FERFJFU1M6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1dBTExFVF9BRERSRVNTLFxuICBcbiAgLy8g0JDQtNGA0LXRgSDQutC+0YjQtdC70YzQutCwINGA0LDQt9GA0LDQsdC+0YLRh9C40LrQsCDQtNC70Y8g0L7RgtC/0YDQsNCy0LrQuCBUT05cbiAgREVWRUxPUEVSX0FERFJFU1M6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX0RFVkVMT1BFUl9BRERSRVNTLFxuICBcbiAgLy8g0J3QsNGB0YLRgNC+0LnQutC4INGB0LXRgtC4IFRPTlxuICBORVRXT1JLOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ORVRXT1JLIHx8ICdtYWlubmV0JyxcbiAgXG4gIC8vIEFQSSDQutC70Y7RhyBUT05cbiAgVE9OX0FQSV9LRVk6IHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1RPTl9BUElfS0VZLFxuICBcbiAgLy8gVVJMLdCw0LTRgNC10YHQsCDQtNC70Y8g0L/RgNC40LvQvtC20LXQvdC40Y9cbiAgQVBQX1VSTDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBQX1VSTCxcbiAgQVBJX1VSTDogcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfQVBJX1VSTCxcbiAgXG4gIC8vINCd0LDRgdGC0YDQvtC50LrQuCBNb25nb0RCXG4gIE1PTkdPREJfVVJJOiBwcm9jZXNzLmVudi5NT05HT0RCX1VSSSxcbiAgXG4gIC8vINCm0LXQvdCwINC30LAgMSDQsdC40LvQtdGCINCyIFRPTlxuICBUSUNLRVRfUFJJQ0U6IE51bWJlcihwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19USUNLRVRfUFJJQ0UpIHx8IDAuMDAwMDAwMDAxLFxuICBcbiAgLy8g0JrQvtC80LjRgdGB0LjRjyDQv9C70LDRgtGE0L7RgNC80Ysg0LIg0L/RgNC+0YbQtdC90YLQsNGFXG4gIFBMQVRGT1JNX0ZFRTogTnVtYmVyKHByb2Nlc3MuZW52Lk5FWFRfUFVCTElDX1BMQVRGT1JNX0ZFRSkgfHwgNSxcbiAgXG4gIC8vINCf0LDRgNCw0LzQtdGC0YDRiyDQtNC70Y8g0YXRgNCw0L3QtdC90LjRjyDQtNCw0L3QvdGL0YUg0LIgbG9jYWxTdG9yYWdlXG4gIFNUT1JBR0VfS0VZUzoge1xuICAgIEFVVEg6ICd0b25vdF9hdXRoJyxcbiAgICBVU0VSOiAndG9ub3RfdXNlcicsXG4gICAgVEhFTUU6ICd0b25vdF90aGVtZScsXG4gICAgTEFORzogJ3Rvbm90X2xhbmcnLFxuICAgIFRFTEVHUkFNX1VTRVI6ICd0ZWxlZ3JhbV91c2VyJyxcbiAgICBBQ0NFU1NfVE9LRU46ICdhY2Nlc3NfdG9rZW4nLFxuICAgIFRJQ0tFVFM6ICd0aWNrZXRzJywgICAgICAgICAgICAgICAgICAgIC8vINCQ0LrRgtC40LLQvdGL0LUg0LHQuNC70LXRgtGLXG4gICAgVE9OT1RfQ0hBTkNFX1RJQ0tFVFM6ICd0b25vdENoYW5jZVRpY2tldHMnLCAvLyDQn9Cw0YHRgdC40LLQvdGL0LUg0LHQuNC70LXRgtGLXG4gICAgWDEwX0dBTUVfU1RBVEU6ICd4MTBfZ2FtZV9zdGF0ZSdcbiAgfSxcbiAgXG4gIC8vINCc0LDQutGB0LjQvNCw0LvRjNC90L7QtSDQutC+0LvQuNGH0LXRgdGC0LLQviDQv9C+0L/Ri9GC0L7QuiDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6INCx0LDQt9C1INC00LDQvdC90YvRhVxuICBNQVhfREJfQ09OTkVDVF9SRVRSSUVTOiA1LFxuICBcbiAgLy8g0JfQsNC00LXRgNC20LrQsCDQvNC10LbQtNGDINC/0L7Qv9GL0YLQutCw0LzQuCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6INCx0LDQt9C1INC00LDQvdC90YvRhSAo0LIg0LzQuNC70LvQuNGB0LXQutGD0L3QtNCw0YUpXG4gIERCX1JFVFJZX0RFTEFZOiAyMDAwLFxuXG4gIC8vIEFQSSDRjdC90LTQv9C+0LjQvdGC0YtcbiAgQVBJX0VORFBPSU5UUzoge1xuICAgIC8vINCe0YHQvdC+0LLQvdGL0LUg0Y3QvdC00L/QvtC40L3RgtGLXG4gICAgVVNFUl9EQVRBOiAnL2FwaS91c2VyLWRhdGEnLFxuICAgIFRFTEVHUkFNX1VTRVI6ICcvYXBpL3RlbGVncmFtLXVzZXInLFxuICAgIFRJQ0tFVFM6ICcvYXBpL3RpY2tldHMvcHVyY2hhc2UnLFxuICAgIFxuICAgIC8vIFgyINGN0L3QtNC/0L7QuNC90YLRiyAo0LrQu9Cw0YHRgdC40YfQtdGB0LrQsNGPINC40LPRgNCwKVxuICAgIFgyOiB7XG4gICAgICBHQU1FOiAnL2FwaS9tYXRjaC9nYW1lJywgICAgICAgICAvLyDQn9C+0LvRg9GH0LXQvdC40LUg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L7QsSDQsNC60YLQuNCy0L3QvtC5INC40LPRgNC1XG4gICAgICBDUkVBVEU6ICcvYXBpL21hdGNoL2NyZWF0ZScsICAgICAgLy8g0KHQvtC30LTQsNC90LjQtSDQvNCw0YLRh9CwXG4gICAgICBDQU5DRUw6ICcvYXBpL21hdGNoL2NhbmNlbCcsICAgICAgLy8g0J7RgtC80LXQvdCwINGD0YfQsNGB0YLQuNGPXG4gICAgICBDT01QTEVURTogJy9hcGkvbWF0Y2gvY29tcGxldGUnICAgLy8g0JfQsNCy0LXRgNGI0LXQvdC40LUg0LzQsNGC0YfQsFxuICAgIH0sXG4gICAgXG4gICAgLy8gWDEwINGN0L3QtNC/0L7QuNC90YLRiyAo0LzRg9C70YzRgtC40L/Qu9C10LXRgClcbiAgICBYMTA6IHtcbiAgICAgIEdBTUU6ICcvYXBpL21hdGNoL3gxMC9nYW1lJywgICAgICAvLyDQn9C+0LvRg9GH0LXQvdC40LUg0LjQvdGE0L7RgNC80LDRhtC40Lgg0L7QsSDQsNC60YLQuNCy0L3QvtC5INC40LPRgNC1XG4gICAgICBDUkVBVEU6ICcvYXBpL21hdGNoL3gxMC9jcmVhdGUnLCAgIC8vINCh0L7Qt9C00LDQvdC40LUg0L3QvtCy0L7Qs9C+INC80LDRgtGH0LBcbiAgICAgIENBTkNFTDogJy9hcGkvbWF0Y2gveDEwL2NhbmNlbCcsICAgLy8g0J7RgtC80LXQvdCwINGD0YfQsNGB0YLQuNGPXG4gICAgICBDT01QTEVURTogJy9hcGkvbWF0Y2gveDEwL2NvbXBsZXRlJyAvLyDQl9Cw0LLQtdGA0YjQtdC90LjQtSDQvNCw0YLRh9CwXG4gICAgfVxuICB9XG59O1xuXG4vKipcbiAqIFVSTCDQtNC70Y8gV2ViU29ja2V0INGB0L7QtdC00LjQvdC10L3QuNGPXG4gKi9cbmV4cG9ydCBjb25zdCBTT0NLRVRfVVJMID0gcHJvY2Vzcy5lbnYuTkVYVF9QVUJMSUNfU09DS0VUX1VSTDtcblxuLyoqXG4gKiDQmtC+0L3RhNC40LPRg9GA0LDRhtC40Y8g0LTQu9GPIFNvY2tldC5JTyDRgdC10YDQstC10YDQsFxuICovXG5leHBvcnQgY29uc3QgU09DS0VUX0NPTkZJRyA9IHtcbiAgLy8gQ09SUyDQvdCw0YHRgtGA0L7QudC60LhcbiAgY29yczoge1xuICAgIG9yaWdpbjogcHJvY2Vzcy5lbnYuU09DS0VUX0NPUlNfT1JJR0lOIHx8ICcqJyxcbiAgICBtZXRob2RzOiBbJ0dFVCcsICdQT1NUJ10sXG4gICAgY3JlZGVudGlhbHM6IHRydWVcbiAgfSxcbiAgXG4gIC8vINCd0LDRgdGC0YDQvtC50LrQuCDQv9C40L3Qs9CwINC4INGC0LDQudC80LDRg9GC0L7QslxuICBwaW5nVGltZW91dDogMzAwMDAsXG4gIHBpbmdJbnRlcnZhbDogMTUwMDAsXG4gIGNvbm5lY3RUaW1lb3V0OiAxMDAwMCxcbiAgXG4gIC8vINCd0LDRgdGC0YDQvtC50LrQuCDQv9C10YDQtdC/0L7QtNC60LvRjtGH0LXQvdC40Y9cbiAgcmVjb25uZWN0aW9uOiB0cnVlLFxuICByZWNvbm5lY3Rpb25BdHRlbXB0czogMyxcbiAgcmVjb25uZWN0aW9uRGVsYXk6IDIwMDAsXG4gIFxuICAvLyDQndCw0YHRgtGA0L7QudC60Lgg0LTQu9GPINC40LPRgNGLXG4gIHdhaXRpbmdUaW1lb3V0OiAxMjAwMDAsIC8vIDIg0LzQuNC90YPRgtGLINCyINC80LjQu9C70LjRgdC10LrRg9C90LTQsNGFXG4gIG1hdGNoVGltZW91dDogMzAwMDAwLCAgIC8vIDUg0LzQuNC90YPRgiDQsiDQvNC40LvQu9C40YHQtdC60YPQvdC00LDRhVxuICBjb3VudGRvd25UaW1lOiA1ICAgICAgICAvLyDQstGA0LXQvNGPINC+0LHRgNCw0YLQvdC+0LPQviDQvtGC0YHRh9C10YLQsCDQsiDRgdC10LrRg9C90LTQsNGFXG59O1xuXG4vKipcbiAqINCa0L7QvdGE0LjQs9GD0YDQsNGG0LjRjyDQtNC70Y8g0YDQtdC20LjQvNCwIFgxMFxuICovXG5leHBvcnQgY29uc3QgWDEwX0NPTkZJRyA9IHtcbiAgLy8g0J7RgdC90L7QstC90YvQtSDQvdCw0YHRgtGA0L7QudC60LhcbiAgTUlOX1BMQVlFUlM6IDEwLCAvLyDQnNC40L3QuNC80LDQu9GM0L3QvtC1INC60L7Qu9C40YfQtdGB0YLQstC+INC40LPRgNC+0LrQvtCyINC00LvRjyDRgdGC0LDRgNGC0LBcbiAgTUFYX1BMQVlFUlM6IDEwLCAvLyDQnNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0LjQs9GA0L7QutC+0LIg0LIg0LzQsNGC0YfQtVxuICBXSU5ORVJTX0NPVU5UOiAzLCAvLyDQmtC+0LvQuNGH0LXRgdGC0LLQviDQv9C+0LHQtdC00LjRgtC10LvQtdC5XG4gIFxuICAvLyDQlNC70Y8g0L7QsdGA0LDRgtC90L7QuSDRgdC+0LLQvNC10YHRgtC40LzQvtGB0YLQuFxuICBQTEFZRVJTOiB7XG4gICAgTUlOOiAxMCxcbiAgICBNQVg6IDEwXG4gIH0sXG4gIFxuICAvLyDQndCw0YHRgtGA0L7QudC60Lgg0L/RgNC40LfQvtCyICjQsiDQv9GA0L7RhtC10L3RgtCw0YUg0L7RgiDQvtCx0YnQtdCz0L4g0L/Rg9C70LApXG4gIFBSSVpFX0RJU1RSSUJVVElPTjoge1xuICAgIEZJUlNUX1BMQUNFOiA1MCwgIC8vIDUwJSDQv9GD0LvQsCDQtNC70Y8g0L/QtdGA0LLQvtCz0L4g0LzQtdGB0YLQsFxuICAgIFNFQ09ORF9QTEFDRTogMzAsIC8vIDMwJSDQv9GD0LvQsCDQtNC70Y8g0LLRgtC+0YDQvtCz0L4g0LzQtdGB0YLQsFxuICAgIFRISVJEX1BMQUNFOiAyMCAgIC8vIDIwJSDQv9GD0LvQsCDQtNC70Y8g0YLRgNC10YLRjNC10LPQviDQvNC10YHRgtCwXG4gIH0sXG4gIFxuICAvLyDQotCw0LnQvNCw0YPRgtGLXG4gIFFVRVVFX1RJTUVPVVQ6IDYwMDAwMCwgICAgIC8vIDEwINC80LjQvdGD0YIg0L3QsCDQvtC20LjQtNCw0L3QuNC1INCyINC+0YfQtdGA0LXQtNC4XG4gIE1BVENIX1RJTUVPVVQ6IDMwMDAwMCwgICAgIC8vIDUg0LzQuNC90YPRgiDQvdCwINC40LPRgNGDXG4gIENPVU5URE9XTl9USU1FOiAxMCwgICAgICAgIC8vIDEwINGB0LXQutGD0L3QtCDQvtCx0YDQsNGC0L3Ri9C5INC+0YLRgdGH0LXRglxuICBcbiAgLy8g0J3QsNGB0YLRgNC+0LnQutC4INC/0LXRgNC10L/QvtC00LrQu9GO0YfQtdC90LjRj1xuICBNQVhfUkVDT05ORUNUX0FUVEVNUFRTOiAzLCAvLyDQnNCw0LrRgdC40LzQsNC70YzQvdC+0LUg0LrQvtC70LjRh9C10YHRgtCy0L4g0L/QvtC/0YvRgtC+0Log0L/QtdGA0LXQv9C+0LTQutC70Y7Rh9C10L3QuNGPXG4gIFJFQ09OTkVDVF9ERUxBWTogMjAwMCwgICAgIC8vINCX0LDQtNC10YDQttC60LAg0LzQtdC20LTRgyDQv9C+0L/Ri9GC0LrQsNC80Lgg0L/QtdGA0LXQv9C+0LTQutC70Y7Rh9C10L3QuNGPICgyINGB0LXQutGD0L3QtNGLKVxuICBcbiAgLy8g0J3QsNGB0YLRgNC+0LnQutC4INCx0LjQu9C10YLQvtCyXG4gIFRJQ0tFVFM6IHtcbiAgICAvLyDQkNC60YLQuNCy0L3Ri9C1INCx0LjQu9C10YLRiyDQtNC70Y8g0LjQs9GA0YsgKNGB0LPQvtGA0LDRjtGCINC/0YDQuCDQuNGB0L/QvtC70YzQt9C+0LLQsNC90LjQuClcbiAgICBHQU1FOiB7XG4gICAgICBDT1NUOiAxLCAgICAgICAgICAgICAgLy8g0KHRgtC+0LjQvNC+0YHRgtGMINGD0YfQsNGB0YLQuNGPICgxINCx0LjQu9C10YIpXG4gICAgICBGSUVMRF9OQU1FOiAnY2hhbmNlJyAvLyDQndCw0LfQstCw0L3QuNC1INC/0L7Qu9GPINCyIEFQSSDQuCDQsdCw0LfQtSDQtNCw0L3QvdGL0YVcbiAgICB9LFxuICAgIFxuICAgIC8vINCf0LDRgdGB0LjQstC90YvQtSDQsdC40LvQtdGC0YsgVE9OT1QgQ0hBTkNFICjQvdCw0YfQuNGB0LvRj9GO0YLRgdGPINC30LAg0L/RgNC+0LjQs9GA0YvRiClcbiAgICBUT05PVF9DSEFOQ0U6IHtcbiAgICAgIFJFV0FSRDogMSwgICAgICAgICAgICAgICAgICAgICAgICAvLyDQmtC+0LvQuNGH0LXRgdGC0LLQviDQsdC40LvQtdGC0L7QsiDQt9CwINC/0YDQvtC40LPRgNGL0YhcbiAgICAgIEZJRUxEX05BTUU6ICd0b25vdENoYW5jZVRpY2tldHMnICAvLyDQndCw0LfQstCw0L3QuNC1INC/0L7Qu9GPINCyIEFQSSDQuCDQsdCw0LfQtSDQtNCw0L3QvdGL0YVcbiAgICB9XG4gIH0sXG5cbiAgLy8g0J3QsNGB0YLRgNC+0LnQutC4INC80LDRgtGH0LBcbiAgTUFUQ0g6IHtcbiAgICBNSU5fUExBWUVSUzogMTAsXG4gICAgTUFYX1BMQVlFUlM6IDEwLFxuICAgIFRJTUVPVVQ6IDMwMDAwMCwgLy8gNSDQvNC40L3Rg9GCXG4gICAgUVVFVUVfVElNRU9VVDogNjAwMDAwIC8vIDEwINC80LjQvdGD0YJcbiAgfSxcblxuICAvLyDQndCw0YHRgtGA0L7QudC60Lgg0L/RgNC40LfQvtCyXG4gIFBSSVpFUzoge1xuICAgIEZJUlNUOiA0NTAsICAgLy8gNTAlINC+0YIgOTAwXG4gICAgU0VDT05EOiAyNzAsICAvLyAzMCUg0L7RgiA5MDBcbiAgICBUSElSRDogMTgwLCAgIC8vIDIwJSDQvtGCIDkwMFxuICAgIENPTlNPTEFUSU9OX1RJQ0tFVDogMSAgLy8g0KPRgtC10YjQuNGC0LXQu9GM0L3Ri9C5INCx0LjQu9C10YIg0LTQu9GPINC/0YDQvtC40LPRgNCw0LLRiNC40YVcbiAgfSxcblxuICAvLyDQotCw0LnQvNC40L3Qs9C4INCw0L3QuNC80LDRhtC40LlcbiAgR0FNRV9USU1JTkdTOiB7XG4gICAgUFJFUEFSSU5HOiA1MDAwLCAgICAvLyA1INGB0LXQutGD0L3QtCBjb3VudGRvd25cbiAgICBNRVJHSU5HOiA3NTAwLCAgICAgIC8vIDcuNSDRgdC10LrRg9C90LQgKDEwINCx0LjQu9C10YLQvtCyICogMSDRgdC10LogLyAxLjI1INGB0LrQvtGA0L7RgdGC0YwpXG4gICAgV0hFRUxfQVBQRUFSOiA0MDAwLCAvLyA0INGB0LXQutGD0L3QtNGLXG4gICAgV0hFRUxfU1BJTjogNzAwMCwgICAvLyA3INGB0LXQutGD0L3QtFxuICAgIFdIRUVMX1NUT1A6IDIwMDAsICAgLy8gMiDRgdC10LrRg9C90LTRi1xuICAgIFJFU1VMVDogMTAwMCAgICAgICAgLy8gMSDRgdC10LrRg9C90LTQsFxuICB9IGFzIGNvbnN0XG59IGFzIGNvbnN0O1xuXG4vLyDQrdC60YHQv9C+0YDRgtC40YDRg9C10Lwg0YLQsNC60LbQtSDQvtGC0LTQtdC70YzQvdGL0LUg0LrQvtC90YHRgtCw0L3RgtGLINC00LvRjyDQvtCx0YDQsNGC0L3QvtC5INGB0L7QstC80LXRgdGC0LjQvNC+0YHRgtC4XG5leHBvcnQgY29uc3QgTUFYX1BMQVlFUlMgPSBYMTBfQ09ORklHLk1BWF9QTEFZRVJTO1xuZXhwb3J0IGNvbnN0IE1JTl9QTEFZRVJTID0gWDEwX0NPTkZJRy5NSU5fUExBWUVSUztcbmV4cG9ydCBjb25zdCBNQVRDSF9USU1FT1VUID0gWDEwX0NPTkZJRy5NQVRDSF9USU1FT1VUO1xuZXhwb3J0IGNvbnN0IFFVRVVFX1RJTUVPVVQgPSBYMTBfQ09ORklHLlFVRVVFX1RJTUVPVVQ7XG5cbi8qKlxuICog0JrQvtC90YTQuNCz0YPRgNCw0YbQuNGPINC00LvRjyDRgNCw0LHQvtGC0Ysg0YEgVE9OXG4gKi9cbmV4cG9ydCBjb25zdCBUT05fQ09ORklHID0ge1xuICAvLyDQkNC00YDQtdGBIFRPTiDQutC+0YjQtdC70YzQutCwINC/0YDQuNC70L7QttC10L3QuNGPXG4gIFdBTExFVF9BRERSRVNTOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19XQUxMRVRfQUREUkVTUyB8fCBDT05GSUcuV0FMTEVUX0FERFJFU1MsXG4gIFxuICAvLyDQkNC00YDQtdGBINC60L7RiNC10LvRjNC60LAg0YDQsNC30YDQsNCx0L7RgtGH0LjQutCwXG4gIERFVkVMT1BFUl9BRERSRVNTOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19ERVZFTE9QRVJfQUREUkVTUyB8fCBDT05GSUcuREVWRUxPUEVSX0FERFJFU1MsXG4gIFxuICAvLyBBUEkg0LrQu9GO0Ycg0LTQu9GPIFRPTlxuICBBUElfS0VZOiBwcm9jZXNzLmVudi5ORVhUX1BVQkxJQ19UT05fQVBJX0tFWSB8fCBDT05GSUcuVE9OX0FQSV9LRVlcbn07XG5cbi8vINCU0YDRg9Cz0LjQtSDQvdCw0YHRgtGA0L7QudC60Lgg0L/RgNC40LvQvtC20LXQvdC40Y9cbmV4cG9ydCBjb25zdCBBUFBfQ09ORklHID0ge1xuICBidWlsZFRpbWVEQkNvbm5lY3Rpb246IHByb2Nlc3MuZW52LlNLSVBfREJfQ09OTkVDVElPTl9EVVJJTkdfQlVJTEQgIT09ICd0cnVlJ1xufTtcblxuLy8g0JTQvtCx0LDQstC70Y/QtdC8INC60L7QvdGE0LjQs9GD0YDQsNGG0LjRjiDQtNC70Y8g0YDQtdC20LjQvNCwINGB0LjQvNGD0LvRj9GG0LjQuFxuZXhwb3J0IGNvbnN0IElTX0RFVl9NT0RFID0gcHJvY2Vzcy5lbnYuTk9ERV9FTlYgPT09ICdkZXZlbG9wbWVudCc7XG5cbmV4cG9ydCBkZWZhdWx0IENPTkZJRzsgIl0sIm5hbWVzIjpbIkNPTkZJRyIsIldBTExFVF9BRERSRVNTIiwicHJvY2VzcyIsImVudiIsIk5FWFRfUFVCTElDX1dBTExFVF9BRERSRVNTIiwiREVWRUxPUEVSX0FERFJFU1MiLCJORVhUX1BVQkxJQ19ERVZFTE9QRVJfQUREUkVTUyIsIk5FVFdPUksiLCJORVhUX1BVQkxJQ19ORVRXT1JLIiwiVE9OX0FQSV9LRVkiLCJORVhUX1BVQkxJQ19UT05fQVBJX0tFWSIsIkFQUF9VUkwiLCJORVhUX1BVQkxJQ19BUFBfVVJMIiwiQVBJX1VSTCIsIk5FWFRfUFVCTElDX0FQSV9VUkwiLCJNT05HT0RCX1VSSSIsIlRJQ0tFVF9QUklDRSIsIk51bWJlciIsIk5FWFRfUFVCTElDX1RJQ0tFVF9QUklDRSIsIlBMQVRGT1JNX0ZFRSIsIk5FWFRfUFVCTElDX1BMQVRGT1JNX0ZFRSIsIlNUT1JBR0VfS0VZUyIsIkFVVEgiLCJVU0VSIiwiVEhFTUUiLCJMQU5HIiwiVEVMRUdSQU1fVVNFUiIsIkFDQ0VTU19UT0tFTiIsIlRJQ0tFVFMiLCJUT05PVF9DSEFOQ0VfVElDS0VUUyIsIlgxMF9HQU1FX1NUQVRFIiwiTUFYX0RCX0NPTk5FQ1RfUkVUUklFUyIsIkRCX1JFVFJZX0RFTEFZIiwiQVBJX0VORFBPSU5UUyIsIlVTRVJfREFUQSIsIlgyIiwiR0FNRSIsIkNSRUFURSIsIkNBTkNFTCIsIkNPTVBMRVRFIiwiWDEwIiwiU09DS0VUX1VSTCIsIk5FWFRfUFVCTElDX1NPQ0tFVF9VUkwiLCJTT0NLRVRfQ09ORklHIiwiY29ycyIsIm9yaWdpbiIsIlNPQ0tFVF9DT1JTX09SSUdJTiIsIm1ldGhvZHMiLCJjcmVkZW50aWFscyIsInBpbmdUaW1lb3V0IiwicGluZ0ludGVydmFsIiwiY29ubmVjdFRpbWVvdXQiLCJyZWNvbm5lY3Rpb24iLCJyZWNvbm5lY3Rpb25BdHRlbXB0cyIsInJlY29ubmVjdGlvbkRlbGF5Iiwid2FpdGluZ1RpbWVvdXQiLCJtYXRjaFRpbWVvdXQiLCJjb3VudGRvd25UaW1lIiwiWDEwX0NPTkZJRyIsIk1JTl9QTEFZRVJTIiwiTUFYX1BMQVlFUlMiLCJXSU5ORVJTX0NPVU5UIiwiUExBWUVSUyIsIk1JTiIsIk1BWCIsIlBSSVpFX0RJU1RSSUJVVElPTiIsIkZJUlNUX1BMQUNFIiwiU0VDT05EX1BMQUNFIiwiVEhJUkRfUExBQ0UiLCJRVUVVRV9USU1FT1VUIiwiTUFUQ0hfVElNRU9VVCIsIkNPVU5URE9XTl9USU1FIiwiTUFYX1JFQ09OTkVDVF9BVFRFTVBUUyIsIlJFQ09OTkVDVF9ERUxBWSIsIkNPU1QiLCJGSUVMRF9OQU1FIiwiVE9OT1RfQ0hBTkNFIiwiUkVXQVJEIiwiTUFUQ0giLCJUSU1FT1VUIiwiUFJJWkVTIiwiRklSU1QiLCJTRUNPTkQiLCJUSElSRCIsIkNPTlNPTEFUSU9OX1RJQ0tFVCIsIkdBTUVfVElNSU5HUyIsIlBSRVBBUklORyIsIk1FUkdJTkciLCJXSEVFTF9BUFBFQVIiLCJXSEVFTF9TUElOIiwiV0hFRUxfU1RPUCIsIlJFU1VMVCIsIlRPTl9DT05GSUciLCJBUElfS0VZIiwiQVBQX0NPTkZJRyIsImJ1aWxkVGltZURCQ29ubmVjdGlvbiIsIlNLSVBfREJfQ09OTkVDVElPTl9EVVJJTkdfQlVJTEQiLCJJU19ERVZfTU9ERSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/config.ts\n");

/***/ }),

/***/ "(rsc)/./src/lib/db.js":
/*!***********************!*\
  !*** ./src/lib/db.js ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   ensureDbConnected: () => (/* binding */ ensureDbConnected)\n/* harmony export */ });\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongoose */ \"mongoose\");\n/* harmony import */ var mongoose__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongoose__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _config__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./config */ \"(rsc)/./src/lib/config.ts\");\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n\n\n\nconst MONGODB_URI = _config__WEBPACK_IMPORTED_MODULE_1__.CONFIG.MONGODB_URI;\n// Логгирование информации о подключении\nconsole.log(\"[DB] Строка подключения MongoDB (без пароля):\", MONGODB_URI?.includes(\"@\") ? MONGODB_URI.split(\"@\")[1] : \"Не задана\");\nconsole.log(\"[DB] Кластер в URI:\", MONGODB_URI?.includes(\"cluster0\") ? \"cluster0\" : \"Нет кластера\");\n// Кеш подключения к MongoDB для повторного использования между функциями API\nlet cachedConnection = null;\n// Функция, определяющая окружение выполнения\nfunction isServerSideRendering() {\n    // Vercel использует переменную VERCEL=1 в production среде\n    return !process.env.VERCEL && \"development\" === \"development\" && \"undefined\" === \"undefined\" && !global.isConnecting;\n}\n/**\n * Подключение к MongoDB, с кешированием соединения\n * @returns {Promise<{db: any, connection: typeof mongoose}>} Mongoose connection и объект базы данных\n */ async function connectToDatabase() {\n    console.log(\"[DB] Инициализация кеша подключения к MongoDB\");\n    // Проверяем наличие строки подключения\n    if (!MONGODB_URI) {\n        console.error(\"[DB] ОШИБКА: MONGODB_URI не установлен. Проверьте переменные окружения\");\n        throw new Error(\"[DB] MONGODB_URI не установлен\");\n    }\n    // Если окружение серверного рендеринга, не подключаемся к базе данных\n    if (isServerSideRendering()) {\n        console.log(\"[DB] Пропускаем подключение к MongoDB во время серверного рендеринга\");\n        return {\n            db: null,\n            connection: null\n        };\n    }\n    // Если соединение уже установлено или в процессе установки, используем его\n    if (cachedConnection) {\n        console.log(\"[DB] Используем существующее подключение к MongoDB\");\n        return {\n            db: cachedConnection.connection.db,\n            connection: cachedConnection\n        };\n    }\n    try {\n        console.log(\"[DB] Устанавливаем новое подключение к MongoDB...\");\n        // Устанавливаем флаг подключения, чтобы избежать параллельных подключений\n        global.isConnecting = true;\n        // Устанавливаем соединение\n        const options = {\n            connectTimeoutMS: 10000,\n            serverSelectionTimeoutMS: 10000\n        };\n        cachedConnection = await mongoose__WEBPACK_IMPORTED_MODULE_0___default().connect(MONGODB_URI, options);\n        console.log(\"[DB] Успешно подключились к MongoDB!\");\n        // Сбрасываем флаг подключения\n        global.isConnecting = false;\n        return {\n            db: cachedConnection.connection.db,\n            connection: cachedConnection\n        };\n    } catch (error) {\n        console.error(\"[DB] ОШИБКА подключения к MongoDB:\", error.message);\n        // Сбрасываем флаг подключения и кеш при ошибке\n        global.isConnecting = false;\n        cachedConnection = null;\n        throw error;\n    }\n}\n/**\n * Обертка для API маршрутов Next.js App Router, которая обеспечивает подключение к базе данных \n * перед выполнением обработчика\n * @param {Function} handler Функция обработчик API запроса\n * @returns {Function} Обернутая функция с подключением к базе данных\n */ function ensureDbConnected(handler) {\n    return async (request, context)=>{\n        try {\n            await connectToDatabase();\n            return handler(request, context);\n        } catch (error) {\n            console.error(\"[DB] Ошибка в обработчике API:\", error.message);\n            return next_server__WEBPACK_IMPORTED_MODULE_2__.NextResponse.json({\n                error: \"Ошибка подключения к базе данных\"\n            }, {\n                status: 500\n            });\n        }\n    };\n}\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((mongoose__WEBPACK_IMPORTED_MODULE_0___default()));\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9zcmMvbGliL2RiLmpzIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7QUFBZ0M7QUFDRTtBQUNTO0FBRTNDLE1BQU1HLGNBQWNGLDJDQUFNQSxDQUFDRSxXQUFXO0FBRXRDLHdDQUF3QztBQUN4Q0MsUUFBUUMsR0FBRyxDQUFDLGlEQUFpREYsYUFBYUcsU0FBUyxPQUFPSCxZQUFZSSxLQUFLLENBQUMsSUFBSSxDQUFDLEVBQUUsR0FBRztBQUN0SEgsUUFBUUMsR0FBRyxDQUFDLHVCQUF1QkYsYUFBYUcsU0FBUyxjQUFjLGFBQWE7QUFFcEYsNkVBQTZFO0FBQzdFLElBQUlFLG1CQUFtQjtBQUV2Qiw2Q0FBNkM7QUFDN0MsU0FBU0M7SUFDUCwyREFBMkQ7SUFDM0QsT0FBTyxDQUFDQyxRQUFRQyxHQUFHLENBQUNDLE1BQU0sSUFBSUYsa0JBQXlCLGlCQUFpQixnQkFBa0IsZUFBZSxDQUFDRyxPQUFPQyxZQUFZO0FBQy9IO0FBRUE7OztDQUdDLEdBQ00sZUFBZUM7SUFDcEJYLFFBQVFDLEdBQUcsQ0FBQztJQUVaLHVDQUF1QztJQUN2QyxJQUFJLENBQUNGLGFBQWE7UUFDaEJDLFFBQVFZLEtBQUssQ0FBQztRQUNkLE1BQU0sSUFBSUMsTUFBTTtJQUNsQjtJQUVBLHNFQUFzRTtJQUN0RSxJQUFJUix5QkFBeUI7UUFDM0JMLFFBQVFDLEdBQUcsQ0FBQztRQUNaLE9BQU87WUFBRWEsSUFBSTtZQUFNQyxZQUFZO1FBQUs7SUFDdEM7SUFFQSwyRUFBMkU7SUFDM0UsSUFBSVgsa0JBQWtCO1FBQ3BCSixRQUFRQyxHQUFHLENBQUM7UUFDWixPQUFPO1lBQ0xhLElBQUlWLGlCQUFpQlcsVUFBVSxDQUFDRCxFQUFFO1lBQ2xDQyxZQUFZWDtRQUNkO0lBQ0Y7SUFFQSxJQUFJO1FBQ0ZKLFFBQVFDLEdBQUcsQ0FBQztRQUVaLDBFQUEwRTtRQUMxRVEsT0FBT0MsWUFBWSxHQUFHO1FBRXRCLDJCQUEyQjtRQUMzQixNQUFNTSxVQUFVO1lBQ2RDLGtCQUFrQjtZQUNsQkMsMEJBQTBCO1FBQzVCO1FBRUFkLG1CQUFtQixNQUFNUix1REFBZ0IsQ0FBQ0csYUFBYWlCO1FBQ3ZEaEIsUUFBUUMsR0FBRyxDQUFDO1FBRVosOEJBQThCO1FBQzlCUSxPQUFPQyxZQUFZLEdBQUc7UUFFdEIsT0FBTztZQUNMSSxJQUFJVixpQkFBaUJXLFVBQVUsQ0FBQ0QsRUFBRTtZQUNsQ0MsWUFBWVg7UUFDZDtJQUNGLEVBQUUsT0FBT1EsT0FBTztRQUNkWixRQUFRWSxLQUFLLENBQUMsc0NBQXNDQSxNQUFNUSxPQUFPO1FBRWpFLCtDQUErQztRQUMvQ1gsT0FBT0MsWUFBWSxHQUFHO1FBQ3RCTixtQkFBbUI7UUFFbkIsTUFBTVE7SUFDUjtBQUNGO0FBRUE7Ozs7O0NBS0MsR0FDTSxTQUFTUyxrQkFBa0JDLE9BQU87SUFDdkMsT0FBTyxPQUFPQyxTQUFTQztRQUNyQixJQUFJO1lBQ0YsTUFBTWI7WUFDTixPQUFPVyxRQUFRQyxTQUFTQztRQUMxQixFQUFFLE9BQU9aLE9BQU87WUFDZFosUUFBUVksS0FBSyxDQUFDLGtDQUFrQ0EsTUFBTVEsT0FBTztZQUM3RCxPQUFPdEIscURBQVlBLENBQUMyQixJQUFJLENBQUM7Z0JBQUViLE9BQU87WUFBbUMsR0FBRztnQkFBRWMsUUFBUTtZQUFJO1FBQ3hGO0lBQ0Y7QUFDRjtBQUVBLGlFQUFlOUIsaURBQVFBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9uZXh0anMtdGVtcGxhdGUvLi9zcmMvbGliL2RiLmpzPzdmOWEiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IG1vbmdvb3NlIGZyb20gJ21vbmdvb3NlJztcbmltcG9ydCB7IENPTkZJRyB9IGZyb20gJy4vY29uZmlnJztcbmltcG9ydCB7IE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJztcblxuY29uc3QgTU9OR09EQl9VUkkgPSBDT05GSUcuTU9OR09EQl9VUkk7XG5cbi8vINCb0L7Qs9Cz0LjRgNC+0LLQsNC90LjQtSDQuNC90YTQvtGA0LzQsNGG0LjQuCDQviDQv9C+0LTQutC70Y7Rh9C10L3QuNC4XG5jb25zb2xlLmxvZygnW0RCXSDQodGC0YDQvtC60LAg0L/QvtC00LrQu9GO0YfQtdC90LjRjyBNb25nb0RCICjQsdC10Lcg0L/QsNGA0L7Qu9GPKTonLCBNT05HT0RCX1VSST8uaW5jbHVkZXMoJ0AnKSA/IE1PTkdPREJfVVJJLnNwbGl0KCdAJylbMV0gOiAn0J3QtSDQt9Cw0LTQsNC90LAnKTtcbmNvbnNvbGUubG9nKCdbREJdINCa0LvQsNGB0YLQtdGAINCyIFVSSTonLCBNT05HT0RCX1VSST8uaW5jbHVkZXMoJ2NsdXN0ZXIwJykgPyAnY2x1c3RlcjAnIDogJ9Cd0LXRgiDQutC70LDRgdGC0LXRgNCwJyk7XG5cbi8vINCa0LXRiCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6IE1vbmdvREIg0LTQu9GPINC/0L7QstGC0L7RgNC90L7Qs9C+INC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPINC80LXQttC00YMg0YTRg9C90LrRhtC40Y/QvNC4IEFQSVxubGV0IGNhY2hlZENvbm5lY3Rpb24gPSBudWxsO1xuXG4vLyDQpNGD0L3QutGG0LjRjywg0L7Qv9GA0LXQtNC10LvRj9GO0YnQsNGPINC+0LrRgNGD0LbQtdC90LjQtSDQstGL0L/QvtC70L3QtdC90LjRj1xuZnVuY3Rpb24gaXNTZXJ2ZXJTaWRlUmVuZGVyaW5nKCkge1xuICAvLyBWZXJjZWwg0LjRgdC/0L7Qu9GM0LfRg9C10YIg0L/QtdGA0LXQvNC10L3QvdGD0Y4gVkVSQ0VMPTEg0LIgcHJvZHVjdGlvbiDRgdGA0LXQtNC1XG4gIHJldHVybiAhcHJvY2Vzcy5lbnYuVkVSQ0VMICYmIHByb2Nlc3MuZW52Lk5PREVfRU5WID09PSAnZGV2ZWxvcG1lbnQnICYmIHR5cGVvZiB3aW5kb3cgPT09ICd1bmRlZmluZWQnICYmICFnbG9iYWwuaXNDb25uZWN0aW5nO1xufVxuXG4vKipcbiAqINCf0L7QtNC60LvRjtGH0LXQvdC40LUg0LogTW9uZ29EQiwg0YEg0LrQtdGI0LjRgNC+0LLQsNC90LjQtdC8INGB0L7QtdC00LjQvdC10L3QuNGPXG4gKiBAcmV0dXJucyB7UHJvbWlzZTx7ZGI6IGFueSwgY29ubmVjdGlvbjogdHlwZW9mIG1vbmdvb3NlfT59IE1vbmdvb3NlIGNvbm5lY3Rpb24g0Lgg0L7QsdGK0LXQutGCINCx0LDQt9GLINC00LDQvdC90YvRhVxuICovXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29ubmVjdFRvRGF0YWJhc2UoKSB7XG4gIGNvbnNvbGUubG9nKCdbREJdINCY0L3QuNGG0LjQsNC70LjQt9Cw0YbQuNGPINC60LXRiNCwINC/0L7QtNC60LvRjtGH0LXQvdC40Y8g0LogTW9uZ29EQicpO1xuICBcbiAgLy8g0J/RgNC+0LLQtdGA0Y/QtdC8INC90LDQu9C40YfQuNC1INGB0YLRgNC+0LrQuCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPXG4gIGlmICghTU9OR09EQl9VUkkpIHtcbiAgICBjb25zb2xlLmVycm9yKCdbREJdINCe0KjQmNCR0JrQkDogTU9OR09EQl9VUkkg0L3QtSDRg9GB0YLQsNC90L7QstC70LXQvS4g0J/RgNC+0LLQtdGA0YzRgtC1INC/0LXRgNC10LzQtdC90L3Ri9C1INC+0LrRgNGD0LbQtdC90LjRjycpO1xuICAgIHRocm93IG5ldyBFcnJvcignW0RCXSBNT05HT0RCX1VSSSDQvdC1INGD0YHRgtCw0L3QvtCy0LvQtdC9Jyk7XG4gIH1cbiAgXG4gIC8vINCV0YHQu9C4INC+0LrRgNGD0LbQtdC90LjQtSDRgdC10YDQstC10YDQvdC+0LPQviDRgNC10L3QtNC10YDQuNC90LPQsCwg0L3QtSDQv9C+0LTQutC70Y7Rh9Cw0LXQvNGB0Y8g0Log0LHQsNC30LUg0LTQsNC90L3Ri9GFXG4gIGlmIChpc1NlcnZlclNpZGVSZW5kZXJpbmcoKSkge1xuICAgIGNvbnNvbGUubG9nKCdbREJdINCf0YDQvtC/0YPRgdC60LDQtdC8INC/0L7QtNC60LvRjtGH0LXQvdC40LUg0LogTW9uZ29EQiDQstC+INCy0YDQtdC80Y8g0YHQtdGA0LLQtdGA0L3QvtCz0L4g0YDQtdC90LTQtdGA0LjQvdCz0LAnKTtcbiAgICByZXR1cm4geyBkYjogbnVsbCwgY29ubmVjdGlvbjogbnVsbCB9O1xuICB9XG5cbiAgLy8g0JXRgdC70Lgg0YHQvtC10LTQuNC90LXQvdC40LUg0YPQttC1INGD0YHRgtCw0L3QvtCy0LvQtdC90L4g0LjQu9C4INCyINC/0YDQvtGG0LXRgdGB0LUg0YPRgdGC0LDQvdC+0LLQutC4LCDQuNGB0L/QvtC70YzQt9GD0LXQvCDQtdCz0L5cbiAgaWYgKGNhY2hlZENvbm5lY3Rpb24pIHtcbiAgICBjb25zb2xlLmxvZygnW0RCXSDQmNGB0L/QvtC70YzQt9GD0LXQvCDRgdGD0YnQtdGB0YLQstGD0Y7RidC10LUg0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQuiBNb25nb0RCJyk7XG4gICAgcmV0dXJuIHsgXG4gICAgICBkYjogY2FjaGVkQ29ubmVjdGlvbi5jb25uZWN0aW9uLmRiLFxuICAgICAgY29ubmVjdGlvbjogY2FjaGVkQ29ubmVjdGlvbiBcbiAgICB9O1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zb2xlLmxvZygnW0RCXSDQo9GB0YLQsNC90LDQstC70LjQstCw0LXQvCDQvdC+0LLQvtC1INC/0L7QtNC60LvRjtGH0LXQvdC40LUg0LogTW9uZ29EQi4uLicpO1xuICAgIFxuICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGE0LvQsNCzINC/0L7QtNC60LvRjtGH0LXQvdC40Y8sINGH0YLQvtCx0Ysg0LjQt9Cx0LXQttCw0YLRjCDQv9Cw0YDQsNC70LvQtdC70YzQvdGL0YUg0L/QvtC00LrQu9GO0YfQtdC90LjQuVxuICAgIGdsb2JhbC5pc0Nvbm5lY3RpbmcgPSB0cnVlO1xuICAgIFxuICAgIC8vINCj0YHRgtCw0L3QsNCy0LvQuNCy0LDQtdC8INGB0L7QtdC00LjQvdC10L3QuNC1XG4gICAgY29uc3Qgb3B0aW9ucyA9IHtcbiAgICAgIGNvbm5lY3RUaW1lb3V0TVM6IDEwMDAwLCAvLyAxMCDRgdC10LrRg9C90LQg0YLQsNC50LzQsNGD0YJcbiAgICAgIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogMTAwMDAsIC8vIDEwINGB0LXQutGD0L3QtCDRgtCw0LnQvNCw0YPRglxuICAgIH07XG4gICAgXG4gICAgY2FjaGVkQ29ubmVjdGlvbiA9IGF3YWl0IG1vbmdvb3NlLmNvbm5lY3QoTU9OR09EQl9VUkksIG9wdGlvbnMpO1xuICAgIGNvbnNvbGUubG9nKCdbREJdINCj0YHQv9C10YjQvdC+INC/0L7QtNC60LvRjtGH0LjQu9C40YHRjCDQuiBNb25nb0RCIScpO1xuICAgIFxuICAgIC8vINCh0LHRgNCw0YHRi9Cy0LDQtdC8INGE0LvQsNCzINC/0L7QtNC60LvRjtGH0LXQvdC40Y9cbiAgICBnbG9iYWwuaXNDb25uZWN0aW5nID0gZmFsc2U7XG4gICAgXG4gICAgcmV0dXJuIHsgXG4gICAgICBkYjogY2FjaGVkQ29ubmVjdGlvbi5jb25uZWN0aW9uLmRiLFxuICAgICAgY29ubmVjdGlvbjogY2FjaGVkQ29ubmVjdGlvbiBcbiAgICB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ1tEQl0g0J7QqNCY0JHQmtCQINC/0L7QtNC60LvRjtGH0LXQvdC40Y8g0LogTW9uZ29EQjonLCBlcnJvci5tZXNzYWdlKTtcbiAgICBcbiAgICAvLyDQodCx0YDQsNGB0YvQstCw0LXQvCDRhNC70LDQsyDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC4INC60LXRiCDQv9GA0Lgg0L7RiNC40LHQutC1XG4gICAgZ2xvYmFsLmlzQ29ubmVjdGluZyA9IGZhbHNlO1xuICAgIGNhY2hlZENvbm5lY3Rpb24gPSBudWxsO1xuICAgIFxuICAgIHRocm93IGVycm9yO1xuICB9XG59XG5cbi8qKlxuICog0J7QsdC10YDRgtC60LAg0LTQu9GPIEFQSSDQvNCw0YDRiNGA0YPRgtC+0LIgTmV4dC5qcyBBcHAgUm91dGVyLCDQutC+0YLQvtGA0LDRjyDQvtCx0LXRgdC/0LXRh9C40LLQsNC10YIg0L/QvtC00LrQu9GO0YfQtdC90LjQtSDQuiDQsdCw0LfQtSDQtNCw0L3QvdGL0YUgXG4gKiDQv9C10YDQtdC0INCy0YvQv9C+0LvQvdC10L3QuNC10Lwg0L7QsdGA0LDQsdC+0YLRh9C40LrQsFxuICogQHBhcmFtIHtGdW5jdGlvbn0gaGFuZGxlciDQpNGD0L3QutGG0LjRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiBBUEkg0LfQsNC/0YDQvtGB0LBcbiAqIEByZXR1cm5zIHtGdW5jdGlvbn0g0J7QsdC10YDQvdGD0YLQsNGPINGE0YPQvdC60YbQuNGPINGBINC/0L7QtNC60LvRjtGH0LXQvdC40LXQvCDQuiDQsdCw0LfQtSDQtNCw0L3QvdGL0YVcbiAqL1xuZXhwb3J0IGZ1bmN0aW9uIGVuc3VyZURiQ29ubmVjdGVkKGhhbmRsZXIpIHtcbiAgcmV0dXJuIGFzeW5jIChyZXF1ZXN0LCBjb250ZXh0KSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIGF3YWl0IGNvbm5lY3RUb0RhdGFiYXNlKCk7XG4gICAgICByZXR1cm4gaGFuZGxlcihyZXF1ZXN0LCBjb250ZXh0KTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc29sZS5lcnJvcignW0RCXSDQntGI0LjQsdC60LAg0LIg0L7QsdGA0LDQsdC+0YLRh9C40LrQtSBBUEk6JywgZXJyb3IubWVzc2FnZSk7XG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ9Ce0YjQuNCx0LrQsCDQv9C+0LTQutC70Y7Rh9C10L3QuNGPINC6INCx0LDQt9C1INC00LDQvdC90YvRhScgfSwgeyBzdGF0dXM6IDUwMCB9KTtcbiAgICB9XG4gIH07XG59XG5cbmV4cG9ydCBkZWZhdWx0IG1vbmdvb3NlOyAiXSwibmFtZXMiOlsibW9uZ29vc2UiLCJDT05GSUciLCJOZXh0UmVzcG9uc2UiLCJNT05HT0RCX1VSSSIsImNvbnNvbGUiLCJsb2ciLCJpbmNsdWRlcyIsInNwbGl0IiwiY2FjaGVkQ29ubmVjdGlvbiIsImlzU2VydmVyU2lkZVJlbmRlcmluZyIsInByb2Nlc3MiLCJlbnYiLCJWRVJDRUwiLCJnbG9iYWwiLCJpc0Nvbm5lY3RpbmciLCJjb25uZWN0VG9EYXRhYmFzZSIsImVycm9yIiwiRXJyb3IiLCJkYiIsImNvbm5lY3Rpb24iLCJvcHRpb25zIiwiY29ubmVjdFRpbWVvdXRNUyIsInNlcnZlclNlbGVjdGlvblRpbWVvdXRNUyIsImNvbm5lY3QiLCJtZXNzYWdlIiwiZW5zdXJlRGJDb25uZWN0ZWQiLCJoYW5kbGVyIiwicmVxdWVzdCIsImNvbnRleHQiLCJqc29uIiwic3RhdHVzIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./src/lib/db.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fuser-history%2Froute&page=%2Fapi%2Fuser-history%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fuser-history%2Froute.ts&appDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main%5Csrc%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5Cconst%5CDesktop%5Ctonotchance-main&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();